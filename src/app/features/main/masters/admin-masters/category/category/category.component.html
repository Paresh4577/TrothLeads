<div class="p-4 h-full w-full">
  <!-- region main heading -->
  <h1 class="new-head text-lg px-4 py-1.5 rounded flex justify-between items-center font-semibold">
    {{ title }}

    <div class="flex gap-x-3  items-center text-lg font-normal">
      <button mat-raised-button class="new-button" [disabled]="CategoryForm.invalid" (click)="submitform()"
        *ngIf="mode == 'Create' || mode == 'Edit'">Save</button>

      <button mat-raised-button class="new-buttony" (click)="backClicked()"
        *ngIf="mode == 'Edit' || mode == 'Create'">Cancel</button>

      <button mat-raised-button class="new-button" (click)="backClicked()" *ngIf="mode == 'View'">Back</button>
    </div>
  </h1>
  <!-- endregion main heading -->

  <!-- region form -->
  <div class="px-4 py-7 rounded bg-white">
    <form [formGroup]="CategoryForm" class="sm:w-120 text-md">

      <div class="grid gap-4">
        <!-- Category Name -->
        <div class="relative">
          <div class="icon">
            <mat-icon>category</mat-icon>
          </div>
          <input type="text" #firstElement id="Name" AlphabetOnly class="peer" placeholder=" " minlength="1"
            maxlength="50" formControlName="Name" />
          <label for="Name" class="mandatory">Category Name</label>
        </div>

        <!-- Sort Order -->
        <div class="relative">
          <div class="icon">
            <mat-icon> short_text</mat-icon>
          </div>
          <input type="text" #firstElement id="SrNo" class="peer" placeholder=" " minlength="1" maxlength="5"
            formControlName="SrNo" />
          <label for="SrNo" class="mandatory">Sort Order</label>
        </div>

        <!-- Online -->
        <div class="font-medium py-5 grid grid-cols-[minmax(60px,100px)_minmax(60px,100px)]">
          <span for="Online"
            class="pr-2 py-1 font-medium after:content-['*'] after:ml-1 after:text-red-500 ml-3">Online</span>
          <mat-slide-toggle color="primary" formControlName="Online" class="relative mt-1"
            (change)="onChange($event,'Online')">
            <span class="flex font-medium text-xl ml-3 mt-1.5">
              {{
              CategoryForm.controls['Online'].value == 1
              ? "Yes"
              : "No"
              }}
            </span>
          </mat-slide-toggle>
        </div>

        <!-- Offline -->
        <div class="font-medium py-5 grid grid-cols-[minmax(60px,100px)_minmax(60px,100px)]">
          <span for="Offline"
            class="pr-2 py-1 font-medium after:content-['*'] after:ml-1 after:text-red-500 ml-3">Offline</span>
          <mat-slide-toggle color="primary" formControlName="Offline" class="relative mt-1"
            (change)="onChange($event,'Offline')">
            <span class="flex font-medium text-xl ml-3 mt-1.5">
              {{
              CategoryForm.controls['Offline'].value == 1
              ? "Yes"
              : "No"
              }}
            </span>
          </mat-slide-toggle>
        </div>

        <!-- Status -->
        <div class="font-medium py-5 grid grid-cols-[minmax(60px,100px)_minmax(60px,100px)]">
          <span for="Status" class="pr-2 py-1 font-medium ml-3">Status</span>
          <mat-slide-toggle color="primary" formControlName="Status" class="relative mt-1"
            (change)="onChange($event,'Status')">
            <span class="flex font-medium text-xl ml-3 mt-1.5">
              {{
              CategoryForm.controls['Status'].value == 1
              ? "Active"
              : "InActive"
              }}
            </span>
          </mat-slide-toggle>
        </div>

      </div>


      <div class="pt-5 flex gap-2 items-center">
        <!-- Insurance Companies -->
        <span class="pr-2 py-1 font-bold text-base after:content-['*'] after:ml-1 after:text-red-500">
          Insurance Companies Mapping
        </span>

        <div class="pt-1 relative" *ngIf="editable">
          <button type="button" class="bg-royal text-white" matTooltip="Add more Insurance Company"
            (click)="addInsuranceCompanies()" mat-button>Add</button>
        </div>
      </div>

      <div class="mappingtable overflow-x-scroll overflow-y-hidden">
        <table formArrayName="InsuranceCategoryMapping" class="bg-white mt-5">
          <tr *ngIf="insuranceCategory.length>0">
            <th>Sr. No.</th>
            <th>Company Name</th>
            <th>Action</th>
          </tr>

          <tr *ngFor="let element of insuranceCategory.controls,let i=index">
            <td [formGroupName]="i">
              <div class="flex items-center justify-center">{{i + 1}}</div>
            </td>

            <td [formGroupName]="i">
              <select class="select" id="InsuranceCompanyCode" formControlName="InsuranceCompanyCode">
                <option value="">--Select--</option>
                <option *ngFor="let Company Of InsuranceCompany$ | async" [value]="Company.Code">
                  {{Company.ShortName}}
                </option>
              </select>

            </td>

            <td [formGroupName]="i">
              <div *ngIf="editable" class="flex items-center justify-center">
                <button mat-icon-button type="button" matTooltip="Remove" (click)="RemoveInsuranceCompanies(i)">
                  <mat-icon color="warn">delete</mat-icon>
                </button>
              </div>
            </td>

          </tr>


        </table>
      </div>

    </form>
  </div>
  <!-- endregion form -->
</div>