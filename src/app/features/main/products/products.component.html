<div class="w-full max-w-8xl mx-auto bg-white shadow-lg rounded-lg pl-0">
  <!-- Header Section -->
  <div class="text-white p-2 rounded-t-lg flex justify-between items-center"
    style="background-color: var(--tableNav-bg)">
    <p class="m-2 text-base" style="font-weight: 500;">Product Management</p>
    <button *ngIf="showAddButton"
      style="padding: 6px 13px; border-radius: 25px; border: none; background-color: white; color: black; font-size: 15px; cursor: pointer;"
      (click)="navigateToAddProduct()">
      Add New
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex justify-center items-center mt-8">
    <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"></div>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md mt-4">
    {{ errorMessage }}
  </div>

  <!-- Success Message -->
<div *ngIf="successMessage" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-md mt-4">
  {{ successMessage }}
</div>


  <!-- Form Section (Input Table) with Horizontal Scroll -->
  <div class="mt-2 relative overflow-x-auto" style="height: calc(100vh - 200px);">
    <div class="absolute inset-0 overflow-x-auto">
      <table class="min-w-full border-collapse shadow-md rounded-lg mb-2" style="background-color: var(--tableNav-bg)">
        <thead class="sticky top-0 z-10">
          <tr class="text-white" style="background-color: var(--tableNav-bg)">
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm ps-3 pt-2">Product Name</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm ps-3 pt-2">Product Image</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm ps-3 pt-2">Status</th>
            <!-- <th class="p-1 text-left whitespace-nowrap font-medium text-sm ps-3 pt-2">Product Code</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm ps-3 pt-2">Product Desc</th> -->
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm ps-3 pt-2"></th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm ps-3 pt-2"></th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm ps-3 pt-2">Action</th>
          </tr>

          <tr style="background-color: var(--tableNav-bg)">
            <td class="p-1 align-middle">
              <input type="text"
                class="p-2 w-37 h-6 rounded-lg bg-white border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                [(ngModel)]="searchProductName" (input)="searchProducts()">
            </td>

            <td class="p-1 align-middle"></td>
            <td class="p-1 align-middle"></td>
            <td class="p-1 align-middle"></td>
            <td class="p-1 align-middle"></td>
            <!-- <td class="p-1 align-middle"></td>
            <td class="p-1 align-middle"></td> -->
          </tr>
        </thead>
        <tbody>
          <!-- Data Rows -->
          <tr *ngFor="let product of paginatedProducts" class="border-b bg-white">
            <td class="p-3 w-40">{{ product.ProductName || '-' }}</td>
            <td class="p-3 w-40">
              <img [src]="product.ProductImage" alt="Product Image" class="w-10 h-10 rounded-full">
            </td>
            <td class="p-3 w-40">
              <label class="modern-switch">
                <input type="checkbox" [(ngModel)]="product.IsActive" (change)="toggleIsActive(product)">
                <span class="modern-slider"></span>
                <span class="modern-status">{{ product.IsActive ? 'Active' : 'Inactive' }}</span>
              </label>
            </td>
            <!-- <td class="p-3 w-40">{{ product.ProductCode || '-' }}</td>
            <td class="p-3 w-40">{{ product.ProductDesc || '-' }}</td> -->
            <td class="p-3 w-40"></td>
            <td class="p-3 w-40"></td>
            <td class="p-3 w-40">
              <div class="flex gap-2">
                <i class='bx bx-edit-alt text-2xl cursor-pointer' (click)="editProduct(product.ProductId)"></i>
                <!-- <i class='bx bx-trash text-2xl cursor-pointer text-red-500'
                  (click)="deleteProduct(product.ProductId)"></i> -->
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && products.length === 0" class="mt-6 bg-gray-100 p-6 rounded-md text-center shadow-md">
    <p class="text-gray-600">{{noRecord}}</p>
  </div>

  <!-- Edit Form Modal -->
  <div *ngIf="showEditForm" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl">
      <h2 class="text-xl font-bold mb-4">{{ isEditing ? 'Edit Product' : 'Add Product' }}</h2>
      <form (ngSubmit)="submitProduct()">
        <div class="row">
          <!-- Product Name -->
          <div class="col-md-6 mb-3">
            <input id="productName" type="text" name="productName" class="form-control" required autocomplete="off"
              placeholder="Product Name" />
          </div>

          <!-- Product Code -->
          <!-- <div class="col-md-6 mb-3">
            <input id="productCode" type="text"  name="productCode"
              class="form-control" placeholder="Product Code" />
          </div> -->
        </div>

        <!-- <div class="row">
         
          <div class="col-md-12 mb-3">
            <textarea id="productDesc_{{currentProduct.ProductId}}" name="productDesc" [(ngModel)]="currentProduct.ProductDesc"
              class="form-control" placeholder="Product Description"></textarea>
          </div>
        </div> -->

        <!-- Buttons -->
        <div class="row">
          <div class="col-md-12 mb-3 d-flex justify-content-end gap-2">
            <button type="submit" class="btn btn-success">
              Save
            </button>
            <button type="button" class="btn btn-secondary">
              Cancel
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- Pagination -->
  <div class="flex justify-between items-center p-4 mt-6 border-t">
    <div>
      <label for="itemsPerPage" class="text-gray-700 mr-2">Items per page:</label>
      <select id="itemsPerPage" class="border p-2 rounded-md text-gray-700 focus:ring-2 focus:ring-cyan-500"
        (change)="onItemsPerPageChange($event)">
        <option *ngFor="let option of itemsPerPageOptions" [value]="option" [selected]="itemsPerPage === option">
          {{ option }}
        </option>
      </select>
    </div>

    <div class="text-gray-700">
      Showing {{ (currentPage - 1) * itemsPerPage + 1 }} to {{ (currentPage - 1) * itemsPerPage +
      paginatedProducts.length }} of {{ totalItems }} results
    </div>
  </div>
</div>