<div class="min-h-screen bg-gray-50 py-0 px-0 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <div class="bg-white overflow-hidden shadow-sm rounded-lg">
      <!-- Header Section -->
      <div class="text-white p-2 rounded-t-lg flex justify-between items-center" style="background-color: var(--title-bg);">
        <p class="m-2 text-base" style="font-weight: 500;">Claim Decision</p>
        <div class="flex items-center space-x-2">
          
        </div>
      </div>

      <!-- Error Message -->
      <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md mt-4">
        {{ errorMessage }}
      </div>

      <!-- Success Message -->
      <div *ngIf="successMessage" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-md mt-4">
        {{ successMessage }}
      </div>

      <!-- Claim Lists Section -->
      <div class="px-0 py-2">
        <div class="grid grid-cols-1 gap-4">
          <!-- Card 1: New Claims (ClaimStatusId = 1) -->
<div class="bg-white p-4 rounded-xl border border-gray-100 shadow-lg hover:shadow-xl transition-shadow duration-300">
  <h5 class="text-lg font-semibold flex items-center mb-4 text-gray-800">
    <i class="fas fa-hourglass-half mr-2 text-blue-500"></i>
    Pending Claims
  </h5>

 <div class="relative max-h-[60vh] overflow-x-auto overflow-y-auto custom-scrollbar scrollbar-hide">
    <table class="min-w-full text-sm text-gray-700 border border-gray-100 rounded-lg overflow-hidden">
      <thead class="sticky top-0 bg-blue-50 text-gray-650">
        <tr>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Policy No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Claim No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">User</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Phone</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Email</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Status</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Type</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">IDV</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Insurer</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Amount</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Policy Status</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Policy Type</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Reg No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Submission</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Txn No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Company</th>
        </tr>
      </thead>
      <tbody>
        <tr 
          *ngFor="let claim of newClaims" 
          class="bg-white border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200">
          <td class="p-3 truncate" [title]="claim.PolicyNo">{{ claim.PolicyNo || '-' }}</td>
          <td class="p-3 truncate" [title]="claim.ClaimIdNumber">{{ claim.ClaimIdNumber || '-' }}</td>
          <td class="p-3 truncate">{{ claim.CreatedByUserName || '-' }}</td>
          <td class="p-3 truncate">{{ claim.PhoneNumber || '-' }}</td>
          <td class="p-3 truncate">{{ claim.Email || '-' }}</td>
          <td class="p-3 truncate">{{ claim.ClaimStatus || '-' }}</td>
          <td class="p-3 truncate">{{ claim.ProductName || '-' }}</td>
          <td class="p-3 truncate">{{ claim.approvedAmount || '-' }}</td>
          <td class="p-3 truncate">{{ claim.InsurerName || '-' }}</td>
          <td class="p-3 truncate">{{ claim.claimAmount || '-' }}</td>
          <td class="p-3 truncate">{{ claim.PolicyStatus || '-' }}</td>
          <td class="p-3 truncate">{{ claim.PolicyType || '-' }}</td>
          <td class="p-3 truncate">{{ claim.RegistrationNo || '-' }}</td>
          <td class="p-3 truncate">{{ claim.submissionMethod || '-' }}</td>
          <td class="p-3 truncate">{{ claim.TransactionNo || '-' }}</td>
          <td class="p-3 truncate">{{ claim.CompanyName || '-' }}</td>
        </tr>

        <tr *ngIf="newClaims?.length === 0">
          <td colspan="17" class="px-4 py-6 text-center text-gray-500 bg-white">
            No new claims available
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
          

   <!-- Card 2: Approved Claims (ClaimStatusId = 7) -->
<div class="bg-white p-4 rounded-xl border border-gray-100 shadow-lg hover:shadow-xl transition-shadow duration-300">
  <h5 class="text-lg font-semibold flex items-center mb-4 text-gray-800">
    <i class="fas fa-check-circle mr-2 text-blue-500"></i>
    Approved Claims
  </h5>

  <div class="relative max-h-[60vh] overflow-x-auto overflow-y-auto custom-scrollbar scrollbar-hide">
    <table class="min-w-full text-sm text-gray-700 border border-gray-100 rounded-lg overflow-hidden">
      <thead class="sticky top-0 bg-blue-50 text-gray-650">
        <tr>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Policy No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Claim No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">User</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Phone</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Email</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Status</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Type</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">IDV</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Insurer</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Amount</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Policy Status</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Policy Type</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Reg No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Submission</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Txn No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Company</th>
       
        </tr>
      </thead>
      <tbody>
        <tr 
          *ngFor="let claim of inProgressClaims" 
          class="bg-white border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200">
          <td class="p-3 truncate" [title]="claim.PolicyNo">{{ claim.PolicyNo || '-' }}</td>
          <td class="p-3 truncate" [title]="claim.ClaimIdNumber">{{ claim.ClaimIdNumber || '-' }}</td>
          <td class="p-3 truncate">{{ claim.CreatedByUserName || '-' }}</td>
          <td class="p-3 truncate">{{ claim.PhoneNumber || '-' }}</td>
          <td class="p-3 truncate">{{ claim.Email || '-' }}</td>
          <td class="p-3 truncate">{{ claim.ClaimStatus || '-' }}</td>
          <td class="p-3 truncate">{{ claim.ProductName || '-' }}</td>
          <td class="p-3 truncate">{{ claim.approvedAmount || '-' }}</td>
          <td class="p-3 truncate">{{ claim.InsurerName || '-' }}</td>
          <td class="p-3 truncate">{{ claim.claimAmount || '-' }}</td>
          <td class="p-3 truncate">{{ claim.PolicyStatus || '-' }}</td>
          <td class="p-3 truncate">{{ claim.PolicyType || '-' }}</td>
          <td class="p-3 truncate">{{ claim.RegistrationNo || '-' }}</td>
          <td class="p-3 truncate">{{ claim.submissionMethod || '-' }}</td>
          <td class="p-3 truncate">{{ claim.TransactionNo || '-' }}</td>
          <td class="p-3 truncate">{{ claim.CompanyName || '-' }}</td>
     
        </tr>

        <tr *ngIf="inProgressClaims?.length === 0">
          <td colspan="17" class="px-4 py-6 text-center text-gray-500 bg-white">
            No approved claims available
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
          

        <!-- Card 3: Rejected Claims (ClaimStatusId = 9) -->
<div class="bg-white p-4 rounded-xl border border-gray-100 shadow-lg hover:shadow-xl transition-shadow duration-300">
  <h5 class="text-lg font-semibold flex items-center mb-4 text-gray-800">
    <i class="fas fa-times-circle mr-2 text-blue-500"></i>
    Rejected Claims
  </h5>

  <div class="relative max-h-[60vh] overflow-x-auto overflow-y-auto custom-scrollbar scrollbar-hide">
    <table class="min-w-full text-sm text-gray-700 border border-gray-100 rounded-lg overflow-hidden">
      <thead class="sticky top-0 bg-blue-50 text-gray-650">
        <tr>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Policy No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Claim No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">User</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Phone</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Email</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Status</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Type</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">IDV</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Insurer</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Amount</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Policy Status</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Policy Type</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Reg No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Submission</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Txn No</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Company</th>
          <th class="p-3 text-left font-semibold whitespace-nowrap tracking-wide">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr 
          *ngFor="let claim of approvedClaims" 
          class="bg-white border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200">
          <td class="p-3 truncate" [title]="claim.PolicyNo">{{ claim.PolicyNo || '-' }}</td>
          <td class="p-3 truncate" [title]="claim.ClaimIdNumber">{{ claim.ClaimIdNumber || '-' }}</td>
          <td class="p-3 truncate">{{ claim.CreatedByUserName || '-' }}</td>
          <td class="p-3 truncate">{{ claim.PhoneNumber || '-' }}</td>
          <td class="p-3 truncate">{{ claim.Email || '-' }}</td>
          <td class="p-3 truncate">{{ claim.ClaimStatus || '-' }}</td>
          <td class="p-3 truncate">{{ claim.ProductName || '-' }}</td>
          <td class="p-3 truncate">{{ claim.approvedAmount || '-' }}</td>
          <td class="p-3 truncate">{{ claim.InsurerName || '-' }}</td>
          <td class="p-3 truncate">{{ claim.claimAmount || '-' }}</td>
          <td class="p-3 truncate">{{ claim.PolicyStatus || '-' }}</td>
          <td class="p-3 truncate">{{ claim.PolicyType || '-' }}</td>
          <td class="p-3 truncate">{{ claim.RegistrationNo || '-' }}</td>
          <td class="p-3 truncate">{{ claim.submissionMethod || '-' }}</td>
          <td class="p-3 truncate">{{ claim.TransactionNo || '-' }}</td>
          <td class="p-3 truncate">{{ claim.CompanyName || '-' }}</td>
          <td class="p-3">
            <button 
              class="flex items-center gap-1 bg-blue-600 hover:bg-blue-700 text-white py-1.5 px-4 rounded-lg text-xs font-semibold transition-all duration-200 shadow-sm hover:shadow"
              (click)="viewDecision(claim.ClaimId)">
              <i class="fas fa-eye text-white text-xs"></i> View Decision
            </button>
          </td>
        </tr>

        <tr *ngIf="approvedClaims?.length === 0">
          <td colspan="17" class="px-4 py-6 text-center text-gray-500 bg-white">
            No rejected claims available
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
          
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for Decision Making -->
  <div *ngIf="showModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 w-full max-w-md">
      <h2 class="text-xl font-bold mb-4">Make Decision for Claim {{ selectedClaimId }}</h2>
      <form [formGroup]="decisionForm" (ngSubmit)="onSubmit()">
        <div class="mb-4">
          <label for="decision" class="block text-sm font-medium text-gray-700">Decision</label>
          <select 
            id="decision" 
            formControlName="decision"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
            <option [ngValue]="null" disabled selected>Select a decision</option>
            <option value="approve">Approve</option>
            <option value="reject">Reject</option>
            <option value="pending">Need More Information</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="comments" class="block text-sm font-medium text-gray-700">Comments</label>
          <textarea
            id="comments"
            formControlName="comments"
            rows="4"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
            placeholder="Add decision comments..."></textarea>
        </div>
        <div class="flex justify-end gap-4">
          <button 
            type="button" 
            class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"
            (click)="closeModal()">
            Cancel
          </button>
          <button 
            type="submit" 
            [disabled]="decisionForm.invalid"
            class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-blue-300">
            Submit Decision
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
  /* Existing styles retained */
  .bg-primary {
    background-color: var(--title-bg);
  }
  .text-primary {
    color: var(--title-bg);
  }
  .border-primary {
    border-color: var(--title-bg);
  }
  .bg-primary-light {
    background-color: rgba(4, 100, 164, 0.3);
  }
  .text-primary-light {
    color: rgba(4, 100, 164, 0.7);
  }
  .bg-primary-lighter {
    background-color: rgba(4, 100, 164, 0.1);
  }
  .bg-primary-badge {
    background-color: rgba(4, 100, 164, 0.2);
  }
  .text-primary-dark {
    color: rgb(3, 80, 131);
  }
  .border-primary-lightest {
    border-color: rgba(4, 100, 164, 0.2);
  }
  .text-primary-lightest {
    color: rgba(4, 100, 164, 0.5);
  }
  .btn {
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 14px;
  }
  .btn-primary {
    background-color: var(--title-bg);
    color: white;
    border: none;
  }
  .btn-primary:hover {
    background-color: rgb(3, 80, 131);
  }
  .btn-outline-secondary {
    background-color: white;
    color: rgb(4, 100, 164);
    border: 1px solid var(--title-bg);
  }
  .btn-outline-secondary:hover {
    background-color: rgba(4, 100, 164, 0.1);
  }
  .btn-outline-danger {
    background-color: white;
    color: #dc3545;
    border: 1px solid #dc3545;
  }
  .btn-outline-danger:hover {
    background-color: rgba(220, 53, 69, 0.1);
  }
  .btn-outline-primary {
    background-color: white;
    color: var(--title-bg);
    border: 1px solid var(--title-bg);
  }
  .btn-outline-primary:hover {
    background-color: rgba(4, 100, 164, 0.1);
  }
  .form-control {
    border: 1px solid rgba(4, 100, 164, 0.2);
    border-radius: 4px;
    padding: 6px 12px;
  }
  .form-control:focus {
    border-color: var(--title-bg);
    box-shadow: 0 0 5px rgba(4, 100, 164, 0.3);
  }
  .form-select {
    border: 1px solid rgba(4, 100, 164, 0.2);
    border-radius: 4px;
    padding: 6px 12px;
    background-color: white;
  }
  .form-select:focus {
    border-color: rgb(4, 100, 164);
    box-shadow: 0 0 5px rgba(4, 100, 164, 0.3);
  }
  .invalid-feedback {
    color: #dc3545;
    font-size: 12px;
  }
  .alert {
    border-radius: 4px;
    padding: 10px;
  }
  .alert-danger {
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
  }
  .alert-success {
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
  }
  .section-header {
    background-color: #e0f2fe;
    padding: 10px 12px;
    border-radius: 6px;
    color: #0369a1;
    font-weight: 500;
  }
  
</style>