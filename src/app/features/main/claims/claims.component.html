<div class="w-full max-w-8xl mx-auto bg-white shadow-lg rounded-lg pl-0">
  <!-- Header Section -->
  <div class="text-white p-2 rounded-t-lg flex justify-between items-center"
    style="background-color:  var(--title-bg);">
    <p class="m-2 text-base" style="font-weight: 500;">Claims Management</p>
    <div class="flex items-center space-x-2">
      <!-- <button
        style="padding: 6px 13px; border-radius: 25px; border: none; background-color: white; color: black; font-size: 15px; cursor: pointer;margin-right: 10px;"
        (click)="navigateToAddProductForm()">
        Claim Product
      </button> -->
      <button
        style="padding: 6px 13px; border-radius: 25px; border: none; background-color: white; color: black; font-size: 15px; cursor: pointer;"
        *appCanWrite="'master'" (click)="navigateToAddClaim()">
        Add New
      </button>
    </div>

  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex justify-center items-center mt-8">
    <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"></div>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md mt-4">
    {{ errorMessage }}
  </div>

  <!-- Form Section (Input Table) with Horizontal Scroll -->
  <div class="mt-2 relative" style="height: calc(100vh - 200px);">
    <div class="absolute inset-0 overflow-x-auto">
      <table class="min-w-full border-collapse shadow-md mb-2" style="background-color:  var(--tableNav-bg)">
        <thead class="sticky top-0 z-10">
          <tr class="text-white" style="background-color:  var(--tableNav-bg)">
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Policy Number</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">User Name</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Customer Name</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Claim Number</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Mobile No</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Product Name</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Insurance Company Name</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Claim Amount</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Date Created</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Claim Status</th>
            <!-- <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Submission Method</th> -->
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">Action</th>
            <th class="p-1 text-left whitespace-nowrap font-medium text-sm pt-2 ps-3">View PDF</th>
          </tr>


          <tr style="background-color:  var(--tableNav-bg)">



            <td class="p-1 align-middle">
              <input
                type="text"
                class="p-1 w-37 h-6 rounded-lg bg-white border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                [(ngModel)]="searchPolicyNo"
                (input)="searchClaims()"
                placeholder=""
              />
            </td>
            <td class="p-1 align-middle">
              <input
                type="text"
                class="p-1 w-37 h-6 rounded-lg bg-white border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                [(ngModel)]="searchUserName"
                (input)="searchClaims()"
                placeholder=""
              />
            </td>
            <td class="p-1 align-middle">
              <input
                type="text"
                class="p-1 w-37 h-6 rounded-lg bg-white border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                [(ngModel)]="searchCustomerName"
                (input)="searchClaims()"
                placeholder=""
              />
            </td>
            <td class="p-1 align-middle">
              <input
                type="text"
                class="p-1 w-37 h-6 rounded-lg bg-white border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                [(ngModel)]="searchClaimNumber"
                (input)="searchClaims()"
                placeholder=""
              />
            </td>
            <td class="p-1 align-middle">
              <input type="text"
                class="p-1 w-37 h-6 rounded-lg bg-white border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                [(ngModel)]="searchFullName" (input)="searchClaims()">
            </td>
            <td class="p-1 align-middle">
              <input type="text" class="p-1 w-37 h-6 rounded-lg bg-white border border-gray-300"
                [(ngModel)]="searchPhoneno" (input)="searchClaims()">
            </td>
            <td class="p-1 align-middle">
              <input
                type="text"
                class="p-1 w-37 h-6 rounded-lg bg-white border border-gray-300 focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                [(ngModel)]="searchInsuranceCompany"
                (input)="searchClaims()"
                placeholder=""
              />
            </td>
           

            

            <td class="p-1 align-middle"></td>
            <td class="p-1 align-middle"></td>
            
            <td class="p-1 align-middle"></td>
            <td class="p-1 align-middle"></td>
            <td class="p-1 align-middle"></td>
          </tr>
        </thead>
        <tbody>
          <!-- Data Rows -->
          <tr *ngFor="let claim of paginatedClaims" class="border-b bg-white">
            <td class="p-3 w-40">{{ claim.PolicyNo || '-' }}</td>
            <td class="p-3 w-40">{{ claim.UserName || '-' }}</td>
            <td class="p-3 w-40">{{ claim.FullName || '-' }}</td>
            <td class="p-3 w-40">{{ claim.ClaimIdNumber || '-' }}</td>
            <td class="p-3 w-40">{{ claim.MobileNo || '-' }}</td>
            <td class="p-3 w-40">{{ claim.ProductName || '-' }}</td>
            <td class="p-3 w-40">{{ claim.InsuranceCompanyName || '-' }}</td>
            <td class="p-3 w-40">{{ claim.claimAmount || '-' }}</td>
            <td class="p-3 w-40">{{ claim.DateCreated || '-' }}</td>
            <td class="p-3 w-40">{{ claim.ClaimStatus || '-' }}</td>
            <!-- <td class="p-3 w-40">{{ claim.submissionMethod || '-' }}</td> -->
            <td class="p-3 w-40">
              <div class="flex gap-2">
                <i class='bx bx-edit-alt text-2xl cursor-pointer text-yellow-600'
                  (click)="editClaim(claim.ClaimId)"></i>
              </div>
            </td>
            <!-- <td class="p-3 w-40">
              <i class="fas fa-file-pdf" style="color: orangered; font-size: 24px; cursor:pointer"
                (click)="showPdf(claim.ClaimId)"></i>
            </td> -->
            <td class="p-3 w-40">
              <button class="btn" (click)="navigateToViewDocument(claim.ClaimId)">
                <i class="bx bx-show text-2xl"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && claims.length === 0" class="mt-6 bg-gray-100 p-6 rounded-md text-center shadow-md">
    <p class="text-gray-600">{{noRecordMessage}}</p>
  </div>


  <!-- Pagination -->
  <div class="flex justify-between items-center p-4 mt-6 border-t">
    <div class="flex items-center space-x-4">
      <div>
        <label for="itemsPerPage" class="text-gray-700 mr-2">Items per page:</label>

      </div>
      <div>
        <label for="pageSelect" class="text-gray-700 mr-2">:</label>
        <select id="pageSelect" class="border p-2 rounded-md text-gray-700 focus:ring-2 focus:ring-cyan-500"
          [(ngModel)]="currentPage" (change)="onPageChange(currentPage)">
          <option *ngFor="let page of [].constructor(totalPages); let i = index" [value]="i + 1">
            Page {{i + 1}} of {{totalPages}}
          </option>
        </select>
      </div>
    </div>
    <div class="text-gray-700">
      Showing {{ (currentPage - 1) * itemsPerPage + 1 }} to {{ (currentPage - 1) * itemsPerPage + paginatedClaims.length
      }} of {{ totalItems }} results
    </div>
  </div>
</div>