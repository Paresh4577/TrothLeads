<div class="px-4 pb-4 max-h-none w-full">
    <div class="pt-4 sticky z-30 headingBorder top-0 w-full">
        <!-- region main heading -->
        <h1 class="new-head h-14 text-lg px-4 py-1.5 rounded flex justify-between items-center font-semibold">
            {{ title }}
            <div class="flex gap-x-3  items-center text-lg font-normal">
                <button mat-raised-button class="new-button"
                    *ngIf="mode == 'Edit' || mode == 'Create' || mode == 'Convert' || mode == 'RenewalTransaction' || mode == 'EndorsementConvert'|| mode == 'OnlineHealthPolicyConvert'|| mode == 'OnlineMotorPolicyConvert'"
                    (click)="backClicked()">Cancel</button>
                <button mat-raised-button class="new-button" (click)="backClicked()"
                    *ngIf="mode == 'View' || mode == 'RFQView'">Back</button>
                <button *ngIf="editable" mat-raised-button class="new-button" (click)="ExpandCollaps()">{{isExpand ?
                    'Collapse' : 'Expand All'}}</button>
            </div>
        </h1>
    </div>
    <!-- endregion main heading -->

    <!-- region form -->
    <div>
        <div class="py-5 rounded">

            <mat-stepper orientation="vertical" #stepper linear [ngClass]="isExpand ? 'showstep' : ''"
                (selectionChange)="bsaicDetailsDisableOnStepperSelectionChabge($event)">
                <mat-step label="Basic Details" [stepControl]="BasicDetailsValidations()">
                    <div class="grid gap-4 sm:grid-cols-2 py-3 lg:grid-cols-4" [formGroup]="TransactionEntryForm">

                        <!-- Category -->
                        <div class="relative ">
                            <mat-icon
                                *ngIf="editable && TransactionEntryForm.get('CategoryId').value && IsbasicDetailsDisable"
                                class="absolute z-20 right-1 top-2 bg-white cursor-pointer"
                                (click)="PageReload()">clear</mat-icon>
                            <div class="icon">
                                <mat-icon>category</mat-icon>
                            </div>
                            <select class="peer bg-white" formControlName="CategoryId">
                                <option value=0>--Select--</option>
                                <option *ngFor="let cat of CategoryList" [value]="cat.Id">
                                    {{ cat.Name }}
                                </option>
                            </select>
                            <label for="CategoryName" class="mandatory">Product Category</label>

                        </div>

                        <!-- SubCatetory -->
                        <div class="relative min-w-56">
                            <div class="icon">
                                <mat-icon> compass_calibration</mat-icon>
                            </div>
                            <select class="peer bg-white" formControlName="SubCategoryId">
                                <option value=0>--Select--</option>
                                <option *ngFor="let option of SubCategoryList" value="{{option.Id}}">
                                    {{ option.Name }}
                                </option>
                            </select>
                            <label for="SubCategoryName" class="mandatory">Product Sub Category</label>

                        </div>

                        <!-- Branch -->
                        <div class="relative ">
                            <div class="icon">
                                <mat-icon>spa</mat-icon>
                            </div>
                            <select id="" formControlName="BranchId">
                                <option value=0 *ngIf="Branchs.length > 1">--Select--</option>
                                <option *ngFor="let Branch of Branchs" [value]="Branch.Id">
                                    {{Branch.Name}}
                                </option>
                            </select>
                            <label for="Category" class="mandatory">Branch</label>
                        </div>

                        <div class="">
                            <button *ngIf="editable" class="form-button mr-3" (click)="BasicDetailsError()" mat-button
                                matStepperNext>Go</button>
                        </div>
                    </div>
                </mat-step>

                <!-- First stepper -->
                <mat-step label="Policy Details - {{f['SubCategoryName'].value}}"
                    [stepControl]="PolicyDetailsValidations()">

                    <div>
                        <form [formGroup]="TransactionEntryForm">

                            <div class="grid gap-4 sm:grid-cols-2 py-3 lg:grid-cols-4">

                                <!-- Transaction ID -->
                                <div class="relative readOnlyInput">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="120" readonly id="Name"
                                        placeholder="Auto" formControlName="TransactionNo" />
                                    <label for="Name">Transaction ID</label>
                                </div>


                                <!-- Date of Entry -->
                                <div class="relative ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="fromD"></mat-datepicker-toggle>
                                            <mat-datepicker #fromD></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="TransactionDate" class="peer"
                                            (blur)="validateDate($event,'TransactionDate')" [max]="currentDate"
                                            formControlName="TransactionDate" placeholder="__/__/____" datemask
                                            [matDatepicker]="fromD" autocomplete="off">
                                        <label for="TransactionDate" class="mandatory">Date of Entry</label>
                                    </div>
                                </div>

                                <!-- Policy Type -->
                                <div class="relative ">
                                    <div class="icon">
                                        <mat-icon>category</mat-icon>
                                    </div>
                                    <select id="" formControlName="PolicyType">
                                        <option value="">--Select--</option>
                                        <option *ngFor="let option of SubCategoryWisePolicyType" [value]="option">
                                            {{option}}
                                        </option>
                                    </select>
                                    <label for="Category" class="mandatory">Policy Type</label>
                                </div>


                                <div class="flex items-center"
                                    *ngIf="f['PolicyType'].value == MotorPolicyTypeEnum.Rollover">
                                    <button class="form-button gap-1" mat-button
                                        (click)="openDiologForPreviousPolicy()">
                                        Previous Policy Details
                                    </button>
                                </div>

                                <!-- Insert Transaction ID -->
                                <div class="relative"
                                    *ngIf="f['PolicyType'].value != MotorPolicyTypeEnum.New
                                                                && f['PolicyType'].value != MotorPolicyTypeEnum.Rollover && mode !='Create'">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer" readonly formControlName="InsertTransactionNo"
                                        maxlength="120" id="iName" placeholder="" />
                                    <label for="iName" class="">Insert Transaction ID</label>
                                </div>


                                <div class="relative" *ngIf="f['PolicyType'].value != MotorPolicyTypeEnum.New
                                && f['PolicyType'].value != MotorPolicyTypeEnum.Rollover && mode=='Create'">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <div class="flex">
                                        <input type="text" class="peer" maxlength="120" id="InsertTransactionNo"
                                            formControlName="TransactionData" placeholder=" "
                                            [matAutocomplete]="InsertTransactionNo" (blur)="onTransactionDataBlur()"
                                            autocomplete="off">
                                        <mat-autocomplete #InsertTransactionNo="matAutocomplete"
                                            autoActiveFirstOption="true" [displayWith]="displayTransactionDataFn">
                                            <mat-option *ngFor="let Transaction of TransactionList$ | async"
                                                [value]="Transaction">
                                                {{ Transaction.TransactionNo }}
                                            </mat-option>
                                        </mat-autocomplete>

                                        <button class="-m-5 z-10" type="button"
                                            (click)="openDiolog('Transaction','Select Transaction No.','Transaction')">
                                            <mat-icon class="-ml-2">
                                                search
                                            </mat-icon></button>
                                        <button *ngIf="f['InsertTransactionNo'].value" type="button" class="-m-7 z-10"
                                            aria-label="clear" matTooltip="Clear" (click)="ResetInsertTransactionNo()">
                                            <mat-icon>clear</mat-icon>
                                        </button>
                                        <label for="InsertTransactionNo" class="mandatory">Insert Transaction ID</label>
                                    </div>

                                </div>


                                <!-- Insurance Company -->
                                <div class="relative lg:col-start-1">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <select id="" formControlName="InsuranceCompanyCode">
                                        <option value="">--Select--</option>
                                        <option [disabled]="f['PrevPolicyInsurComp'].value == Company.Code"
                                            *ngFor="let Company Of InsuranceCompany$ | async" [value]="Company.Code">
                                            {{Company.ShortName}}
                                        </option>
                                    </select>
                                    <label for="Category" class="mandatory">Insurance Company</label>
                                </div>


                                <!-- Product/Plan Name -->
                                <div class="relative">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <select id="" formControlName="ProductCode">
                                        <option value="">--Select--</option>
                                        <option *ngFor="let Product Of Product$ | async" [value]="Product.ProductCode">
                                            {{Product.Name}}
                                        </option>
                                    </select>
                                    <label for="Category">Product/Plan Name</label>
                                </div>

                                <div class="relative mt-1" *ngIf="mode != 'View' && mode != 'RFQView'">
                                    <button
                                        *ngIf="f['InsuranceCompanyCode'].value != '' && f['CategoryName'].value != '' && f['SubCategoryName'].value != ''"
                                        class="form-button" mat-button matTooltip="Create Product/Plan"
                                        (click)="openDiologForProductPlan()">Create</button>
                                </div>


                            </div>

                            <div *ngIf="editable" class="gap-4 py-3 flex flex-wrap items-center">

                                <!-- Co-Share -->
                                <div class="lableInputbox w-32" *ngIf="f['InsuranceCompanyCode'].value != ''">
                                    <input type="checkbox" class="peer " [formControl]="CoShareBool" id="Co-Share"
                                        value="true" />
                                    <label for="Co-Share" class="">Co-Share</label>
                                </div>


                                <!-- Insurance Company (Co-Share) -->
                                <div *ngIf="CoShareBool.value && isCoShareDisabled && isCoShareFinancialDisabled"
                                    class="relative w-56">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>

                                    <select id="" [formControl]="CoShareId">
                                        <option value="">--Select--</option>
                                        <option *ngFor="let Company Of InsuranceCompany$ | async"
                                            [value]="Company.Code">
                                            {{Company.ShortName}}
                                        </option>
                                    </select>
                                    <label for="ICCS" class="mandatory">Insurance Company</label>
                                </div>


                                <!-- Co-Share Percentage -->
                                <div *ngIf="CoShareBool.value && isCoShareDisabled && isCoShareFinancialDisabled"
                                    class="relative ">
                                    <div class="icon">
                                        <mat-icon>percent</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="5" id="CSP"
                                        [formControl]="CoSharePercent" placeholder=" " autocomplete="off" />
                                    <label for="CSP" class="mandatory">Co-Share Percentage</label>
                                </div>

                                <!-- Add -->
                                <button *ngIf="CoShareBool.value && isCoShareDisabled && isCoShareFinancialDisabled"
                                    (click)="addCoSharesRow()" mat-raised-button
                                    class="bg-royal text-white">Add</button>

                            </div>



                            <div class="block tableStyling">
                                <table formArrayName="CoShares" class="newTable overflow-auto">
                                    <tr *ngIf="Coshare.length>0">
                                        <th>Sr. No.</th>
                                        <th>Insurance Company</th>
                                        <th>Percentage (%)</th>
                                        <th *ngIf="editable">Action</th>
                                    </tr>
                                    <tr *ngFor="let element of Coshare.controls,let i=index">
                                        <td [formGroupName]="i"><input class="text-center" type="text" [value]="i+1"
                                                readonly maxlength="2" Onlynumber></td>
                                        <td [formGroupName]="i"><input type="text" readonly
                                                formControlName="COshareInsurerShortName" maxlength="120"></td>
                                        <td [formGroupName]="i"><input class="text-center"
                                                [ngClass]="element.get('EditCoSharePer').value == true ? 'border-blue-500 bg-royal editInput':''"
                                                type="text" [readonly]="!element.get('EditCoSharePer').value"
                                                formControlName="COshareper" Decimal maxlength="5" autocomplete="off">
                                        </td>
                                        <td [formGroupName]="i" *ngIf="editable">
                                            <div>
                                                <button
                                                    *ngIf="!element.get('EditCoSharePer').value && i != 0 && !isCoShareFinancialDisabled"
                                                    (click)="editCoShareRow(i)" mat-icon-button type="button"
                                                    matTooltip="Edit">
                                                    <mat-icon color="">edit</mat-icon>
                                                </button>
                                                <button *ngIf="element.get('EditCoSharePer').value && i != 0"
                                                    (click)="saveCoShareRow(i)" mat-icon-button type="button"
                                                    matTooltip="Save">
                                                    <mat-icon color="">done</mat-icon>
                                                </button>
                                                <button
                                                    *ngIf="i != 0 && isCoShareDisabled && isCoShareFinancialDisabled "
                                                    (click)="deleteCoSharesRow(i)" mat-icon-button type="button"
                                                    matTooltip="Remove">
                                                    <mat-icon color="warn">delete</mat-icon>
                                                </button>
                                            </div>
                                        </td>
                                </table>
                            </div>

                        </form>
                    </div>


                    <div *ngIf="!isExpand">
                        <button class="form-button m-2" mat-button matStepperPrevious>Back</button>
                        <button class="form-button m-2" mat-button matStepperNext
                            (click)="PolicyDetailsError()">Next</button>
                    </div>
                </mat-step>

                <!-- Second stepper -->
                <mat-step label="Customer Details" [stepControl]="CustomerDetailsValidations()">

                    <div class="p-4 h-full w-full">


                        <!-- region form -->
                        <div>
                            <form [formGroup]="TransactionEntryForm">

                                <div class="grid lg:grid-cols-3 md:grid-cols-2  gap-5 mt-4 grid-cols-1">

                                    <!-- Group Head -->
                                    <div class="flex gap-2 items-center">
                                        <div class="relative w-full">
                                            <div class="icon">
                                                <mat-icon>group</mat-icon>
                                            </div>
                                            <div class="flex">
                                                <input type="text" class="peer" formControlName="GroupHeadName"
                                                    placeholder=" " id="GroupHead" [matAutocomplete]="groupSearch"
                                                    autocomplete="off" />
                                                <mat-autocomplete class="peer" #groupSearch="matAutocomplete"
                                                    (optionSelected)="AutocompleteSelectedEvent($event,'GroupHead')">
                                                    <mat-option *ngFor="let group of GroupHeadName$ | async"
                                                        [value]="group">
                                                        {{ group.Name }}
                                                    </mat-option>
                                                </mat-autocomplete>
                                                <button class="-m-5 z-10" type="button" *ngIf="editable"
                                                    (click)="openDiolog('GroupHead','Select GroupHead','GroupHead')">
                                                    <mat-icon class="-ml-2">
                                                        search
                                                    </mat-icon>
                                                </button>
                                                <button
                                                    *ngIf="TransactionEntryForm.get('GroupHeadName').value && editable"
                                                    type="button" class="-m-7 z-10" aria-label="clear"
                                                    matTooltip="Clear" (click)="clear('GroupHeadName', 'GroupHeadId')">
                                                    <mat-icon>clear</mat-icon>
                                                </button>
                                                <label for="GroupHead" class="mandatory">Group Head</label>
                                            </div>
                                        </div>
                                        <div *ngIf="editable">
                                            <button class="form-button gap-1" mat-button matTooltip="Create Group Head"
                                                (click)="openDiologForGroupHead()">
                                                Create</button>
                                        </div>
                                    </div>

                                    <!-- Customer Name -->
                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon> person_pin</mat-icon>
                                        </div>
                                        <div class="flex">
                                            <input type="text" class="peer" placeholder=" "
                                                formControlName="CustomerName" id="CustomerName"
                                                [matAutocomplete]="customerSearch" autocomplete="off" />
                                            <mat-autocomplete class="peer" #customerSearch="matAutocomplete"
                                                (optionSelected)="AutocompleteSelectedEvent($event,'customer')">
                                                <mat-option *ngFor="let customer of CustomerName$ | async"
                                                    [value]="customer">
                                                    {{ customer.FullName }}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <button class="-m-5 z-10" type="button" *ngIf="editable"
                                                (click)="openDiolog('CustomerOfGroupHead','Select Customer','customer')">
                                                <mat-icon class="-ml-2">
                                                    search
                                                </mat-icon>
                                            </button>
                                            <button *ngIf="TransactionEntryForm.get('CustomerName').value && editable"
                                                type="button" class="-m-7 z-10" aria-label="clear" matTooltip="Clear"
                                                (click)="clearWithIdZero('CustomerName', 'CustomerId')">
                                                <mat-icon>clear</mat-icon>
                                            </button>
                                            <label for="CustomerName" class="mandatory">Customer Name</label>
                                        </div>
                                    </div>



                                    <!-- Mobile Number -->
                                    <div class="relative">
                                        <div class="icon">
                                            <mat-icon>phone</mat-icon>
                                        </div>
                                        <input type="text" class="peer" Onlynumber maxlength="10" id="MobileNumber"
                                            formControlName="MobileNo" placeholder=" " autocomplete="off" />
                                        <label for="MobileNumber" class="mandatory">Mobile Number</label>
                                    </div>

                                </div>
                                <div formArrayName="Addresses"
                                    class="grid lg:grid-cols-3 md:grid-cols-2  gap-5 mt-4 grid-cols-1">

                                    <div [formGroupName]="0" class="grid gap-5">
                                        <p class="font-semibold text-base">
                                            Correspondence Address
                                        </p>


                                        <!-- Correspondence Address (Line 1) -->
                                        <div class="relative">
                                            <div class="icon">
                                                <mat-icon>home</mat-icon>
                                            </div>
                                            <input type="text" class="peer" id="CorrespondenceAddresL1"
                                                formControlName="AddressLine1" placeholder=" " autocomplete="off" />
                                            <label for="CorrespondenceAddresL1" class="">Correspondence Address (Line
                                                1)</label>
                                        </div>

                                        <!-- Correspondence Address (Line 2) -->
                                        <div class="relative">
                                            <div class="icon">
                                                <mat-icon>home</mat-icon>
                                            </div>
                                            <input type="text" class="peer" id="CorrespondenceAddresL2"
                                                formControlName="AddressLine2" placeholder=" " autocomplete="off" />
                                            <label for="CorrespondenceAddresL2" class="">Correspondence Address (Line
                                                2)</label>
                                        </div>

                                        <!--  PIN Code (Correspondence) -->
                                        <div class="relative ">
                                            <div class="icon">
                                                <mat-icon>pin_drop</mat-icon>
                                            </div>
                                            <div class="flex">
                                                <input type="text" Onlynumber maxlength="6" class="peer"
                                                    formControlName="CityPinCode" placeholder=" " id="PincodeNumber"
                                                    [matAutocomplete]="oppoSearch" autocomplete="off" />
                                                <mat-autocomplete class="peer" #oppoSearch="matAutocomplete"
                                                    (optionSelected)="PinCodeSelected($event,0)">
                                                    <mat-option *ngFor="let pincode of pincodes$ | async"
                                                        [value]="pincode">
                                                        {{ pincode.PinCode }} {{ pincode.CityName }}
                                                    </mat-option>
                                                </mat-autocomplete>
                                                <button class="-m-5 z-10" type="button" *ngIf="editable"
                                                    (click)="openDiologForPINcode('Pincode','Select Pincode',0)">
                                                    <mat-icon class="-ml-2">
                                                        search
                                                    </mat-icon>
                                                </button>
                                                <button *ngIf="address.controls[0].get('CityPinCode').value && editable"
                                                    type="button" class="-m-7 z-10" aria-label="clear"
                                                    matTooltip="Clear" (click)="ClearPincode(0)">
                                                    <mat-icon>clear</mat-icon>
                                                </button>
                                                <label for="PinCodeNumber" class="">PIN Code (Correspondence)</label>
                                            </div>
                                        </div>


                                        <!-- City -->
                                        <div class="relative">
                                            <div class="icon">
                                                <mat-icon>location_city</mat-icon>
                                            </div>
                                            <input type="text" class="peer" id="City" formControlName="CityName"
                                                placeholder=" " autocomplete="off" />
                                            <label for="City" class="">City</label>
                                        </div>

                                        <!-- State -->
                                        <div class="relative">
                                            <div class="icon">
                                                <mat-icon>domain</mat-icon>
                                            </div>
                                            <input type="text" class="peer" id="State" formControlName="StateName"
                                                placeholder=" " autocomplete="off" />
                                            <label for="State" class="">State</label>
                                        </div>

                                    </div>

                                    <div [formGroupName]="1" class="grid gap-5">

                                        <div class="flex justify-between">
                                            <p class="font-semibold text-base"
                                                *ngIf="TransactionEntryForm.get('CategoryCode').value != CategoryCodeEnum.Fire">
                                                Registration Address </p>
                                            <p class="font-semibold text-base"
                                                *ngIf="TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Fire">
                                                Risk Location</p>
                                            <div class="flex gap-2 items-center" *ngIf="editable">
                                                <input type="checkbox" (click)="CheckSameas($event)"> <span>Same
                                                    Address</span>
                                            </div>
                                        </div>


                                        <!-- Registration Address (Line 1) -->
                                        <div class="relative">
                                            <div class="icon">
                                                <mat-icon>home</mat-icon>
                                            </div>
                                            <input type="text" class="peer" id="PropertyAddresL1"
                                                formControlName="AddressLine1" placeholder=" " autocomplete="off" />
                                            <label for="PropertyAddresL1" class="">Registration Address (Line 1)</label>
                                        </div>

                                        <!-- Registration Address (Line 2) -->
                                        <div class="relative">
                                            <div class="icon">
                                                <mat-icon>home</mat-icon>
                                            </div>
                                            <input type="text" class="peer" id="PropertyAddresL2"
                                                formControlName="AddressLine2" placeholder=" " autocomplete="off" />
                                            <label for="PropertyAddresL2" class="">Registration Address (Line 2)</label>
                                        </div>

                                        <!--  PIN Code (Registration) -->
                                        <div class="relative ">
                                            <div class="icon">
                                                <mat-icon> pin_drop</mat-icon>
                                            </div>
                                            <div class="flex">
                                                <input type="text" Onlynumber maxlength="6" class="peer"
                                                    formControlName="CityPinCode" placeholder=" " id="PincodeNumber"
                                                    [matAutocomplete]="oppoPinSearch" autocomplete="off" />
                                                <mat-autocomplete class="peer" #oppoPinSearch="matAutocomplete"
                                                    (optionSelected)="PinCodeSelected($event,1)">
                                                    <mat-option *ngFor="let pincode of pincodestwo$ | async"
                                                        [value]="pincode">
                                                        {{ pincode.PinCode }} {{ pincode.CityName }}
                                                    </mat-option>
                                                </mat-autocomplete>
                                                <button class="-m-5 z-10" type="button" *ngIf="editable"
                                                    (click)="openDiologForPINcode('Pincode','Select Pincode',1)">
                                                    <mat-icon class="-ml-2">
                                                        search
                                                    </mat-icon>
                                                </button>
                                                <button *ngIf="address.controls[1].get('CityPinCode').value && editable"
                                                    type="button" class="-m-7 z-10" aria-label="clear"
                                                    matTooltip="Clear" (click)="ClearPincode(1)">
                                                    <mat-icon>clear</mat-icon>
                                                </button>
                                                <label for="PinCodeNumber" class="">PIN Code (Registration) </label>
                                            </div>
                                        </div>


                                        <!-- City -->
                                        <div class="relative">
                                            <div class="icon">
                                                <mat-icon>location_city</mat-icon>
                                            </div>
                                            <input type="text" class="peer" id="Cityname" formControlName="CityName"
                                                placeholder=" " autocomplete="off" />
                                            <label for="Cityname" class="">City</label>
                                        </div>

                                        <!-- State -->
                                        <div class="relative">
                                            <div class="icon">
                                                <mat-icon>domain</mat-icon>
                                            </div>
                                            <input type="text" class="peer" id="Statename" formControlName="StateName"
                                                placeholder=" " autocomplete="off" />
                                            <label for="Statename" class="">State</label>
                                        </div>

                                    </div>

                                </div>
                            </form>
                        </div>
                        <!-- endregion form -->
                    </div>

                    <div *ngIf="!isExpand">
                        <button class="form-button m-2" mat-button matStepperPrevious>Back</button>
                        <button class="form-button m-2" (click)="CustomerDetailsError()" mat-button
                            matStepperNext>Next</button>
                    </div>

                </mat-step>


                <!-- Fourth stepper -->
                <mat-step *ngIf="TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Travel ||
                             TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Fire ||
                             TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Health ||
                             TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Marine ||
                             TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Liability ||
                             TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Life ||
                             TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Engineering"
                    label="Category Information" [stepControl]="categoryTypeValidations()">
                    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6  pr-5 items-center py-5 bg-white"
                        [formGroup]="TransactionEntryForm">
                        <!-- Category Type -->
                        <div class="relative">
                            <div class="icon">
                                <mat-icon> compass_calibration</mat-icon>
                            </div>
                            <select class="peer bg-white" formControlName="CategoryType">
                                <option value="">Select</option>
                                <option [value]="option.title" *ngFor="let option of CategoryType1List">{{option.title}}
                                </option>
                            </select>
                            <label for="" class="mandatory">Category Type</label>

                        </div>

                        <!-- Category Type - 2 -->
                        <div class="relative"
                            *ngIf="TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Travel">
                            <div class="icon">
                                <mat-icon> compass_calibration</mat-icon>
                            </div>
                            <select class="peer bg-white" formControlName="SubCategoryType">
                                <option [disabled]="TransactionEntryForm.get('CategoryType').value == 'Domestic'"
                                    value="">
                                    Select</option>
                                <option
                                    [disabled]="(TransactionEntryForm.get('CategoryType').value == 'Domestic' && option.title != 'Other'
                                     || (TransactionEntryForm.get('CategoryType').value != 'Domestic' && option.title == 'Other'))"
                                    [value]="option.title" *ngFor="let option of CategoryType2List">{{ option.title }}
                                </option>
                            </select>
                            <label for="" class="mandatory">Category Type - 2</label>

                        </div>


                        <!-- Passport No -->
                        <div class="relative col-start-1"
                            *ngIf="TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Travel">
                            <div class="icon">
                                <mat-icon>chrome_reader_mode</mat-icon>
                            </div>
                            <input matInput maxlength="20" type="text" id="PassportNo" placeholder=" " class="peer"
                                formControlName="PassportNo" autocomplete="off" />
                            <label for="PassportNo"
                                [ngClass]="TransactionEntryForm.get('CategoryType').value == 'Including USA & Canada' ||
                                         TransactionEntryForm.get('CategoryType').value == 'Excluding USA & Canada' ? 'mandatory' : ''">Passport
                                No</label>
                        </div>

                        <!-- Passport Expiry Date -->
                        <div class="relative "
                            *ngIf="TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Travel">
                            <div class="flex">
                                <div class="icon">
                                    <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                        [for]="PassportExpiryDate"></mat-datepicker-toggle>
                                    <mat-datepicker #PassportExpiryDate></mat-datepicker>
                                </div>
                                <input matInput type="text" id="PassportExpiryDate" class="peer"
                                    formControlName="PassportExpiryDate" placeholder="__/__/____" datemask
                                    [matDatepicker]="PassportExpiryDate" autocomplete="off">
                                <label for="PassportExpiryDate"
                                    [ngClass]="TransactionEntryForm.get('CategoryType').value == 'Including USA & Canada' ||
                                         TransactionEntryForm.get('CategoryType').value == 'Excluding USA & Canada' ? 'mandatory' : ''">Passport
                                    Expiry Date</label>
                            </div>

                        </div>

                        <!-- Policy Days -->
                        <div class="relative col-start-1"
                            *ngIf="TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Travel">
                            <div class="icon">
                                <mat-icon>watch_later</mat-icon>
                            </div>
                            <select class="peer bg-white" formControlName="PolicyPeriod">
                                <option value="">Select</option>
                                <option [value]="option.day" *ngFor="let option of TravelPolicydaysdrplist">
                                    {{ option.day }}
                                </option>
                            </select>
                            <label for="">Policy Days</label>
                        </div>

                        <!-- Add Details -->
                        <div class="relative" *ngIf="TransactionEntryForm.get('CategoryType').value == 'Domestic'">
                            <div class="icon">
                                <mat-icon>edit</mat-icon>
                            </div>
                            <input matInput maxlength="20" type="text" id="EngineNo" placeholder=" " class="peer"
                                formControlName="DomesticDetail" AlphabetNumberOnly autocomplete="off" />
                            <label for="EngineNo">Add Details</label>
                        </div>

                    </div>

                    <div *ngIf="!isExpand">
                        <button class="form-button m-2" mat-button matStepperPrevious>Back</button>
                        <button class="form-button m-2" (click)="categoryTypeError()" mat-button
                            matStepperNext>Next</button>
                    </div>

                </mat-step>

                <!-- Only for Motor -->
                <mat-step *ngIf="TransactionEntryForm.get('CategoryCode').value== CategoryCodeEnum.Motor"
                    label="Category Information" [stepControl]="categoryInfoMotorValidations()">
                    <div class="py-5">
                        <form [formGroup]="TransactionEntryForm">

                            <div formGroupName="VehicleDetail" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">


                                <!-- Vehicle Number -->
                                <div class="relative ">
                                    <div class="icon" [ngSwitch]="TransactionEntryForm.get('SubCategoryCode').value">
                                        <mat-icon *ngSwitchDefault>rv_hookup</mat-icon>
                                        <mat-icon
                                            *ngSwitchCase="SubCategoryCodeEnum.PrivateCar">directions_car</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.TwoWheeler">motorcycle</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.GCV">local_shipping</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.PCV">directions_bus</mat-icon>
                                    </div>
                                    <input type="text" class="peer uppercase" id="VehicleNumber" maxlength="13"
                                        formControlName="VehicleNumber" placeholder="GJxxAAxxxx"
                                        (keydown)="VehicleNumberAllowkey($event)" autocomplete="off" />
                                    <label for="VehicleNumber"
                                        [ngClass]="(f['PolicyType'].value != 'New') ? 'mandatory' : ''">Vehicle
                                        Number</label>
                                </div>



                                <!-- Registration Date -->
                                <div class="relative ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="ManufacturingYear"></mat-datepicker-toggle>
                                            <mat-datepicker #ManufacturingYear></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="ManufacturingYear" class="peer"
                                            formControlName="RegistrationDate" placeholder="__/__/____" datemask
                                            [matDatepicker]="ManufacturingYear" autocomplete="off">
                                        <label for="ManufacturingYear" class="mandatory">Registration Date</label>
                                    </div>

                                </div>




                                <div class="relative col-start-1">
                                    <div class="icon" [ngSwitch]="TransactionEntryForm.get('SubCategoryCode').value">
                                        <mat-icon *ngSwitchDefault>rv_hookup</mat-icon>
                                        <mat-icon
                                            *ngSwitchCase="SubCategoryCodeEnum.PrivateCar">directions_car</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.TwoWheeler">motorcycle</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.GCV">local_shipping</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.PCV">directions_bus</mat-icon>
                                    </div>
                                    <mat-select class="peer bg-white" name="Brand" formControlName="BrandId"
                                        (closed)="ClearSearchCtrl()">
                                        <div class="flex sticky top-0 z-10">
                                            <input type="text" maxlength="30" [formControl]="BrandSearchCtrl"
                                                class=" searchBox ml-1 mr-1" placeholder="Search" autocomplete="off">
                                            <mat-icon class="-ml-7 mt-1">
                                                search
                                            </mat-icon>
                                        </div>
                                        <mat-option *ngFor="let option of BrandList" [value]="option.Id">
                                            {{ option.Name }}
                                        </mat-option>
                                    </mat-select>
                                    <label for="BdName" class="mandatory">Manufacturer/Brand Name</label>
                                </div>


                                <!-- Model Name -->
                                <div class="relative ">
                                    <div class="icon" [ngSwitch]="TransactionEntryForm.get('SubCategoryCode').value">
                                        <mat-icon *ngSwitchDefault>rv_hookup</mat-icon>
                                        <mat-icon
                                            *ngSwitchCase="SubCategoryCodeEnum.PrivateCar">directions_car</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.TwoWheeler">motorcycle</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.GCV">local_shipping</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.PCV">directions_bus</mat-icon>
                                    </div>
                                    <div class="flex">
                                        <input type="text" class="peer" formControlName="ModelName" placeholder=" "
                                            id="ModelName" [matAutocomplete]="modelSearch" autocomplete="off" />
                                        <mat-autocomplete class="peer" #modelSearch="matAutocomplete"
                                            (optionSelected)="AutocompleteSelectedEvent($event,'Model')">
                                            <mat-option *ngFor="let model of Model$ | async" [value]="model">
                                                {{ model.Name }}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <button class="-m-5 z-10" type="button"
                                            *ngIf="editable && !TransactionEntryForm.get('VehicleDetail.ModelName').disabled"
                                            (click)="openDiolog('CategoryOfModel','Select Model Name','VehicleDetailModel')">
                                            <mat-icon class="-ml-2">
                                                search
                                            </mat-icon>
                                        </button>
                                        <button
                                            *ngIf="TransactionEntryForm.get('VehicleDetail.ModelName').value && editable && !TransactionEntryForm.get('VehicleDetail.ModelName').disabled"
                                            type="button" class="-m-7 z-10" aria-label="clear" matTooltip="Clear"
                                            (click)="clearVehicleSModel()">
                                            <mat-icon>clear</mat-icon>
                                        </button>
                                        <label for="ModelName" class="mandatory">Model</label>
                                    </div>

                                </div>

                                <!-- SubModel Name -->
                                <div class="relative ">
                                    <div class="icon" [ngSwitch]="TransactionEntryForm.get('SubCategoryCode').value">
                                        <mat-icon *ngSwitchDefault>rv_hookup</mat-icon>
                                        <mat-icon
                                            *ngSwitchCase="SubCategoryCodeEnum.PrivateCar">directions_car</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.TwoWheeler">motorcycle</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.GCV">local_shipping</mat-icon>
                                        <mat-icon *ngSwitchCase="SubCategoryCodeEnum.PCV">directions_bus</mat-icon>
                                    </div>
                                    <div class="flex">
                                        <input type="text" class="peer" formControlName="SubModelName" placeholder=" "
                                            id="SubModelName" [matAutocomplete]="subModelSearch" autocomplete="off" />
                                        <mat-autocomplete class="peer" #subModelSearch="matAutocomplete"
                                            (optionSelected)="AutocompleteSelectedEvent($event,'SubModel')">
                                            <mat-option *ngFor="let smodel of SubModel$ | async" [value]="smodel">
                                                {{ smodel.Name }}
                                            </mat-option>
                                        </mat-autocomplete>
                                        <button class="-m-5 z-10" type="button"
                                            *ngIf="editable && !TransactionEntryForm.get('VehicleDetail.SubModelName').disabled"
                                            (click)="openDiolog('CategoryOfSubModel','Select Sub-Model Name','VehicleDetailSubModel')">
                                            <mat-icon class="-ml-2">
                                                search
                                            </mat-icon>
                                        </button>
                                        <button
                                            *ngIf="TransactionEntryForm.get('VehicleDetail.SubModelName').value && editable
                                                        && !TransactionEntryForm.get('VehicleDetail.SubModelName').disabled"
                                            type="button" class="-m-7 z-10" aria-label="clear" matTooltip="Clear"
                                            (click)="clearVehicleSubModel()">
                                            <mat-icon>clear</mat-icon>
                                        </button>
                                        <label for="SubModelName" class="mandatory">Sub-Model</label>
                                    </div>

                                </div>

                                <!-- RTO Code -->
                                <!-- <div class="relative "
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.PrivateCar ||
                                                       TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler ||
                                                       TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PCV ||
                                                       TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.MiscellaneousD ||
                                                       TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.GCV">
                                    <div class="icon">
                                        <mat-icon>local_convenience_store</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="120" id="RTOCode"
                                        formControlName="RTOCode" placeholder=" " autocomplete="off" />
                                    <label for="RTOCode" class="mandatory">RTO Code</label>
                                </div> -->

                                <!-- RTO Code -->
                                <div class="relative"
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.PrivateCar ||
                                                       TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler ||
                                                       TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PCV ||
                                                       TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.MiscellaneousD ||
                                                       TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.GCV">
                                    <div class="icon">
                                        <mat-icon>local_convenience_store</mat-icon>
                                    </div>
                                    <mat-select class="peer bg-white" formControlName="RTOCode"
                                        (closed)="CloseDropdownEven('RTO')">
                                        <div class="flex sticky top-0 z-10">
                                            <input type="text" #RTOSearchCtrl class=" searchBox ml-1 mr-1"
                                                placeholder="Search" (keyup)="rtoCodeFormating($event)" maxlength="5"
                                                matInput (keyup)="searchInDropDown($event,'RTO')">
                                            <mat-icon class="-ml-7 mt-3">search</mat-icon>
                                        </div>
                                        <mat-option [value]="''">--Select--</mat-option>
                                        <mat-option *ngFor="let option of FilteredRTOCodeList" [value]="option.Code">
                                            {{ option.Code }}
                                        </mat-option>
                                    </mat-select>
                                    <label for="RTOCode" class="mandatory">RTO Code</label>
                                </div>


                                <!-- EngineNumber -->
                                <div class="relative ">
                                    <div class="icon">
                                        <mat-icon>explicit</mat-icon>
                                    </div>
                                    <input matInput type="text" id="EngineNo" uppercase formControlName="EngineNumber"
                                        placeholder=" " class="peer" required autocomplete="off" maxlength="50" />
                                    <label for="EngineNo" class="mandatory">Engine Number</label>
                                </div>

                                <!-- ChasisNumber -->
                                <div class="relative ">
                                    <div class="icon">
                                        <mat-icon>dehaze</mat-icon>
                                    </div>
                                    <input type="text" uppercase type="text" id="ChassisNo" autocomplete="off"
                                        formControlName="ChasisNumber" placeholder=" " class="peer" required />
                                    <label for="ChassisNo" class="mandatory">Chasis Number</label>
                                </div>

                                <!-- Passenger Capacity -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar  ||
                                                        TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PCV">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " readonly maxlength="120" id="PassengerCapacity"
                                        formControlName="PassengerCapacity" placeholder=" " />
                                    <label for="PassengerCapacity" class="mandatory">Passenger Capacity</label>
                                </div>

                                <!-- Cubic Capacity OR KW -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar ||
                                                            TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.TwoWheeler ||
                                                            TransactionEntryForm.get('SubCategoryCode').value==  SubCategoryCodeEnum.PCV ||
                                                            TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.MiscellaneousD">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " readonly maxlength="120" id="CubicCapacityORKW"
                                        formControlName="CubicCapacityORKW" placeholder=" " />
                                    <label for="CubicCapacityORKW" class="mandatory">Cubic Capacity/KW</label>
                                </div>

                                <!-- FuelType -->
                                <div class="relative">
                                    <div class="icon">
                                        <mat-icon>local_gas_station</mat-icon>
                                    </div>
                                    <select class="peer bg-white" name="FuelType" formControlName="FuelType">
                                        <option disabled value="">Select</option>
                                        <option disabled *ngFor="let option of VehicleSubmodelFuelTypeList"
                                            [value]="option.name">
                                            {{ option.name }}
                                        </option>
                                    </select>
                                    <label for="FuelType" class="mandatory">Fuel Type</label>
                                </div>

                                <!-- Vehicle Type -->
                                <!-- <div class="relative">
                                                <div class="icon">
                                                    <mat-icon>tonality</mat-icon>
                                                </div>
                                                <input type="text" class="peer " readonly id="VehicleType" formControlName="VehicleType"
                                                    placeholder=" " />
                                                <label for="VehicleType" class="">Vehicle Type</label>
                                            </div> -->

                                <!-- Vehicle Type -->
                                <div class="relative">
                                    <div class="icon">
                                        <mat-icon>extension</mat-icon>
                                    </div>
                                    <select class="peer" formControlName="VehicleType">
                                        <option value="">Select</option>
                                        <option *ngFor="let option of TransactionVehicleTypeList"
                                            [value]="option.title">{{ option.title }}</option>
                                    </select>
                                    <label for="FuelType" class="mandatory">Vehicle Type</label>
                                </div>


                                <!-- Any Claim in Previous Year? -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('CategoryCode').value== CategoryCodeEnum.Motor">
                                    <div class="icon">
                                        <mat-icon>spa</mat-icon>
                                    </div>

                                    <select id="" formControlName="AnyClaiminPreviousYear">
                                        <option value="">--Select--</option>
                                        <option [value]="true">Yes</option>
                                        <option [value]="false">No</option>
                                    </select>
                                    <label for="Category" class="mandatory">Any Claim in Previous Year?</label>
                                </div>

                                <!-- Vehicle Age -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('CategoryCode').value== CategoryCodeEnum.Motor">
                                    <div class="icon">
                                        <mat-icon>insert_chart</mat-icon>
                                    </div>
                                    <input type="text" class="peer " readonly id="VehicleAge"
                                        formControlName="VehicleAge" placeholder=" " />

                                    <label for="Category" class="mandatory">Vehicle Age</label>
                                </div>

                                <!-- Vehicle Class -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.PrivateCar">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>

                                    <select id="" formControlName="VehicleClass">
                                        <option value="">--Select--</option>
                                        <option [value]="'High End'">High End</option>
                                        <option [value]="'Non High End'">Non High End</option>
                                    </select>
                                    <label for="VehicleClass" class="mandatory">Vehicle Class</label>
                                </div>

                                <!-- Gross Vehicle Weight -->
                                <!-- || TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PCV -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.GCV ">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " Decimal maxlength="120" id="GrossVehicleWeight"
                                        formControlName="GrossVehicleWeight" placeholder=" " #GrossVehicleWeight
                                        (focus)="GrossVehicleWeight.select()" autocomplete="off" />
                                    <label for="GrossVehicleWeight" class="mandatory">Gross Vehicle Weight (KG)</label>
                                </div>

                                <!-- <div class="relative " *ngIf="TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar
                                                            || TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.MiscellaneousD">
                                                            </div> -->






                                <!-- <div class="w-full" *ngIf="TransactionEntryForm.get('CategoryCode').value== CategoryCodeEnum.Motor">
                                                        </div> -->


                                <!-- <div class="w-full"
                                                         *ngIf="TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.PrivateCar ||
                                                          TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler ||
                                                          TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PCV||
                                                          TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.GCV"></div> -->


                                <!-- Usage -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.PCV ||
                                                    TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.GCV||
                                                    TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.MiscellaneousD">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>

                                    <select id="Usage" formControlName="Usage">
                                        <option value="">--Select--</option>
                                        <option [value]="'Agricultural'"
                                            *ngIf="TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.MiscellaneousD">
                                            Agricultural</option>
                                        <option [value]="'Non Agricultural'"
                                            *ngIf="TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.MiscellaneousD">
                                            Non Agricultural</option>
                                        <option [value]="'Private'"
                                            *ngIf="TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.PCV || TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.GCV || TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.MiscellaneousD">
                                            Private</option>
                                        <option [value]="'Public'"
                                            *ngIf="TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.PCV || TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.GCV || TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.MiscellaneousD">
                                            Public</option>
                                    </select>
                                    <label for="Usage" class="mandatory">Usage</label>
                                </div>

                                <!-- Registration Type - Bus -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.PCV">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>

                                    <select id="RegistrationType" formControlName="RegistrationType">
                                        <option value="">--Select--</option>
                                        <option [value]="'Registered in Firm/Institution Name'">Registered in
                                            Firm/Institution Name</option>
                                        <option [value]="'Registered in Individual Name'">Registered in Individual Name
                                        </option>
                                    </select>
                                    <label for="RegistrationType" class="mandatory">Registration Type - Bus</label>
                                </div>

                                <!-- Contract Period - Bus(Year) -->
                                <div class="relative"
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.PCV">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="15" id="ContractPeriod"
                                        formControlName="ContractPeriod" placeholder=" " value="12 Months"
                                        autocomplete="off" />
                                    <label for="ContractPeriod" class="mandatory">Contract Period - Bus(Year)</label>
                                </div>

                                <!-- Taxi Agency  -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('SubCategoryCode').value== SubCategoryCodeEnum.PCV">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input class="peer" type="text" formControlName="TaxiAgency" placeholder=" "
                                        autocomplete="off">
                                    <!-- <select id="TaxiAgency" formControlName="TaxiAgency">
                                                    <option value="">--Select--</option>
                                                    <option [value]="'Ola/ Uber'">Ola/ Uber</option>
                                                    <option [value]="'Other than Ola/Uber'">Other than Ola/Uber</option>
                                                </select> -->
                                    <label for="TaxiAgency " class="mandatory">Taxi Agency</label>
                                </div>


                                <!-- <div class="relative "
                                                                *ngIf="TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar">
                                                            </div> -->

                                <!-- Fleet Business -->

                                <div class="relative flex gap-2 items-center"
                                    *ngIf="TransactionEntryForm.get('CategoryCode').value==CategoryCodeEnum.Motor">
                                    <span for="FleetBusiness" class="CustomBox dummy-formField">
                                        <input type="checkbox" id="FleetBusiness" class="peer"
                                            formControlName="isFleetBusiness">
                                        <span class="text-sm ms-3 CustomLabel">Fleet Business</span>
                                    </span>
                                </div>


                                <div class="flex gap-2 items-center"
                                    *ngIf="TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Motor">
                                    <div class="relative w-full"
                                        *ngIf="TransactionEntryForm.get('VehicleDetail.isFleetBusiness').value">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <div class="flex">
                                            <input type="text" class="peer " maxlength="120" id="FleetBusinessName"
                                                formControlName="FleetBusinessName" placeholder=" "
                                                [matAutocomplete]="fleetCodeSearch" autocomplete="off" />
                                            <mat-autocomplete class="peer" #fleetCodeSearch="matAutocomplete"
                                                (optionSelected)="AutocompleteSelectedEvent($event,'FleetBusiness')">
                                                <mat-option *ngFor="let fleet of FleetCode$ | async" [value]="fleet">
                                                    {{ fleet.FleetNo }}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <button
                                                *ngIf="TransactionEntryForm.get('VehicleDetail.FleetBusinessName').value && editable"
                                                type="button" class="-m-7 z-10" aria-label="clear" matTooltip="Clear"
                                                (click)="clearFleetBusiness()">
                                                <mat-icon>clear</mat-icon>
                                            </button>
                                            <label for="FleetBusinessName" class="mandatory">Fleet Code</label>
                                        </div>
                                    </div>
                                    <div
                                        *ngIf="TransactionEntryForm.get('VehicleDetail.isFleetBusiness').value && mode !='View' && mode != 'RFQView'">
                                        <button class="form-button gap-1" mat-button (click)="openDiologForFleet()">
                                            <!-- <mat-icon class="text-white">add</mat-icon> -->
                                            Create</button>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div *ngIf="!isExpand">
                            <button class="form-button m-2" mat-button matStepperPrevious>Back</button>
                            <button class="form-button m-2" (click)="categoryInfoMotorError()" mat-button
                                matStepperNext>Next</button>
                        </div>

                    </div>
                </mat-step>


                <mat-step label="Policy Information" [stepControl]="PolicyInformationValidations()">
                    <div *ngIf="TransactionEntryForm.get('CategoryCode').value== CategoryCodeEnum.Motor" class="py-5">

                        <form [formGroup]="TransactionEntryForm">

                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4  ">

                                <!-- Policy Type  -->
                                <div class="relative">
                                    <div class="icon">
                                        <mat-icon>group_work</mat-icon>
                                    </div>

                                    <select id="PremiumType" formControlName="PremiumType">
                                        <option value="">--Select--</option>
                                        <option [value]="'1 OD + 1 TP'">1 OD + 1 TP</option>
                                        <option [value]="'1 OD + 3 TP'"
                                            *ngIf="TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.PrivateCar">
                                            1 OD + 3 TP
                                        </option>
                                        <option [value]="'1 OD + 5 TP'"
                                            *ngIf="TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler">
                                            1 OD + 5 TP
                                        </option>
                                        <option [value]="'PAOD'"
                                            *ngIf="TransactionEntryForm.get('SubCategoryCode').value == SubCategoryCodeEnum.PrivateCar || 
                                                TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler">
                                            PA Owner Driver
                                        </option>
                                        <option [value]="'SAOD'"
                                            *ngIf="TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar || 
                                                TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler ||  
                                                TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PCV || 
                                                TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.GCV || 
                                                TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.MiscellaneousD">
                                            SAOD
                                        </option>
                                        <option [value]="'SATP'">
                                            SATP
                                        </option>
                                    </select>
                                    <label for="PremiumType" class="mandatory">Premium Type</label>
                                </div>
                                <!-- Proposal Submission Date -->
                                <div class="relative ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="SubmissionDate"></mat-datepicker-toggle>
                                            <mat-datepicker #SubmissionDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="SubmissionDate" class="peer"
                                            (blur)="validateDate($event,'SubmissionDate')"
                                            [min]="TransactionEntryForm.get('VehicleDetail.RegistrationDate').value"
                                            formControlName="SubmissionDate" placeholder="__/__/____" datemask
                                            [matDatepicker]="SubmissionDate" autocomplete="off">
                                        <label for="SubmissionDate" class="mandatory">Proposal Submission Date</label>
                                    </div>

                                </div>

                                <!-- Issue Date -->
                                <div class="relative ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="IssueDate"></mat-datepicker-toggle>
                                            <mat-datepicker #IssueDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="IssueDate" class="peer"
                                            (blur)="validateDate($event,'IssueDate')"
                                            [min]="TransactionEntryForm.get('VehicleDetail.RegistrationDate').value"
                                            formControlName="IssueDate" placeholder="__/__/____" datemask
                                            [matDatepicker]="IssueDate" autocomplete="off">
                                        <label for="IssueDate" class="mandatory">Policy Issue Date</label>
                                    </div>

                                </div>

                            </div>
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 ">

                                <!-- Policy Number -->
                                <div class="relative ">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="50" id="PolicyNo"
                                        formControlName="PolicyNo" placeholder=" " autocomplete="off" />
                                    <label for="PolicyNo" class="mandatory">Policy Number</label>
                                </div>

                                <!-- Start Date -->
                                <div class="relative ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="StartDate"></mat-datepicker-toggle>
                                            <mat-datepicker #StartDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="StartDate" class="peer"
                                            (blur)="validateDate($event,'StartDate')"
                                            [min]="TransactionEntryForm.get('VehicleDetail.RegistrationDate').value"
                                            formControlName="StartDate" placeholder="__/__/____" datemask
                                            [matDatepicker]="StartDate" autocomplete="off">
                                        <label for="StartDate" class="mandatory">Policy Start Date
                                            <span
                                                *ngIf="(TransactionEntryForm.get('PremiumType').value != '1 OD + 3 TP' && TransactionEntryForm.get('PremiumType').value != '1 OD + 5 TP')">
                                                {{this.TransactionEntryForm.get('PremiumType').value}}
                                            </span>
                                            <span
                                                *ngIf="(TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar || TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler)
                                                    &&  (TransactionEntryForm.get('PremiumType').value=='1 OD + 3 TP' || TransactionEntryForm.get('PremiumType').value=='1 OD + 5 TP')">
                                                - 1OD
                                            </span>
                                        </label>
                                    </div>

                                </div>

                                <!-- End Date -->
                                <div class="relative ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="EndDate"></mat-datepicker-toggle>
                                            <mat-datepicker #EndDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="EndDate" class="peer"
                                            (blur)="validateDate($event,'EndDate')"
                                            [min]="TransactionEntryForm.get('StartDate').value"
                                            formControlName="EndDate" placeholder="__/__/____" datemask
                                            [matDatepicker]="EndDate" autocomplete="off">
                                        <label for="EndDate" class="mandatory">Policy End Date

                                            <span
                                                *ngIf="(TransactionEntryForm.get('PremiumType').value != '1 OD + 3 TP' && TransactionEntryForm.get('PremiumType').value != '1 OD + 5 TP')">
                                                {{this.TransactionEntryForm.get('PremiumType').value}}
                                            </span>
                                            <span
                                                *ngIf="(TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar || TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler)
                                                                  &&  (TransactionEntryForm.get('PremiumType').value=='1 OD + 3 TP' || TransactionEntryForm.get('PremiumType').value=='1 OD + 5 TP')">
                                                - 1OD
                                            </span>
                                        </label>
                                    </div>

                                </div>

                            </div>
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 ">
                                <!-- Sum Insured -->
                                <div class="relative" *ngIf="(TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler||  
                                    TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar) && 
                                    TransactionEntryForm.get('PremiumType').value != 'SATP' &&
                                    TransactionEntryForm.get('PremiumType').value != 'PAOD'">
                                    <div class="icon rs"></div>
                                    <input type="text" class="peer " maxlength="15" id="SumInsured"
                                        formControlName="SumInsured" placeholder=" " #SumInsured
                                        (focus)="SumInsured.select()" (keydown)="DecimalWithMinus($event)"
                                        autocomplete="off" />
                                    <label for="SumInsured" class="mandatory">Vehicle IDV</label>
                                </div>

                                <!-- Policy Start Date - TP -->
                                <div class="relative " *ngIf="(TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler || TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar)
                                                      && (TransactionEntryForm.get('PremiumType').value=='1 OD + 3 TP' || TransactionEntryForm.get('PremiumType').value=='1 OD + 5 TP')
                                                      ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="TPStartDate"></mat-datepicker-toggle>
                                            <mat-datepicker #TPStartDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="TPStartDate" class="peer"
                                            (blur)="validateDate($event,'StartDate')" formControlName="TPStartDate"
                                            placeholder="__/__/____" datemask [matDatepicker]="TPStartDate"
                                            autocomplete="off">
                                        <label for="TPStartDate" class="mandatory">Policy Start Date
                                            <span
                                                *ngIf=" TransactionEntryForm.get('PremiumType').value=='1 OD + 3 TP'">-
                                                3TP</span>
                                            <span
                                                *ngIf=" TransactionEntryForm.get('PremiumType').value=='1 OD + 5 TP'">-
                                                5TP</span>
                                        </label>
                                    </div>

                                </div>

                                <!-- Policy End  Date - TP -->
                                <div class="relative " *ngIf="
                                                     (TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler || TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar)
                                                     && (TransactionEntryForm.get('PremiumType').value=='1 OD + 3 TP' || TransactionEntryForm.get('PremiumType').value=='1 OD + 5 TP')
                                                     ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="TPEndDate"></mat-datepicker-toggle>
                                            <mat-datepicker #TPEndDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="TPEndDate" class="peer"
                                            (blur)="validateDate($event,'EndDate')" formControlName="TPEndDate"
                                            placeholder="__/__/____" datemask [matDatepicker]="TPEndDate"
                                            autocomplete="off">

                                        <label for="TPStartDate" class="mandatory">Policy End Date
                                            <span
                                                *ngIf=" TransactionEntryForm.get('PremiumType').value=='1 OD + 3 TP'">-
                                                3TP</span>
                                            <span
                                                *ngIf=" TransactionEntryForm.get('PremiumType').value=='1 OD + 5 TP'">-
                                                5TP</span>
                                        </label>
                                    </div>

                                </div>

                            </div>
                            <!-- This div for SubCategoryType = GCV & PCV -->
                            <div class="grid grid-rows-2 lg:grid-cols-3 gap-x-4 sm:grid-cols-2"
                                *ngIf=" TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.GCV ||
                                                      TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PCV ||
                                                       TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.MiscellaneousD">
                                <div class="row-start-1 row-span-2 lg:col-start-1 sm:col-start-1">
                                    <!-- Sum Insured -->
                                    <div class="relative"
                                        *ngIf="TransactionEntryForm.get('PremiumType').value != 'SATP'">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " maxlength="15" id="SumInsured" placeholder=" "
                                            formControlName="SumInsured" #SumInsured (focus)="SumInsured.select()"
                                            (keydown)="DecimalWithMinus($event)" autocomplete="off" />
                                        <label for="SumInsured" class="mandatory">Vehicle IDV</label>
                                    </div>

                                    <div formGroupName="VehicleDetail"
                                        class="relative mt-4 lg:col-start-1 sm:col-start-1"
                                        *ngIf="TransactionEntryForm.get('VehicleDetail.FuelType').value != 'Diesel' && TransactionEntryForm.get('PremiumType').value != 'SATP'">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " maxlength="15" #CNGKitAmount
                                            (focus)="CNGKitAmount.select()" id="CNGKitValue" placeholder=" "
                                            formControlName="CNGKitValue" (keydown)="DecimalWithMinus($event)"
                                            autocomplete="off" />
                                        <label for="CNGKitValue" class="">CNG Kit Value</label>
                                    </div>
                                </div>
                                <div formGroupName="VehicleDetail" class=" row-span-2 lg:col-start-2 sm:col-start-1">
                                    <div class="relative">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <textarea type="text" class="peer max-h-26 min-h-26" maxlength="120"
                                            id="Remarks" placeholder=" " formControlName="Remarks"
                                            autocomplete="off"></textarea>
                                        <label for="Remarks" class="">Remarks (if any)</label>
                                    </div>

                                </div>

                            </div>

                            <div formGroupName="VehicleDetail" class="grid sm:grid-cols-2 lg:grid-cols-3 pt-4 gap-4">

                                <div class="grid gap-4 ">
                                    <!-- CNG Kit Value -->
                                    <div class="relative " *ngIf="TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar &&
                                            TransactionEntryForm.get('VehicleDetail.FuelType').value != 'Diesel' && 
                                            TransactionEntryForm.get('PremiumType').value != 'SATP' && 
                                            TransactionEntryForm.get('PremiumType').value != 'PAOD'">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " maxlength="15" #CNGKitAmount
                                            (focus)="CNGKitAmount.select()" (keydown)="DecimalWithMinus($event)"
                                            id="CNGKitValue" formControlName="CNGKitValue" placeholder=" "
                                            autocomplete="off" />
                                        <label for="CNGKitValue" class="">CNG Kit Value</label>
                                    </div>

                                    <!-- Electrical Accessories Value -->
                                    <div class="relative " *ngIf="TransactionEntryForm.get('PremiumType').value != 'SATP' &&
                                        TransactionEntryForm.get('PremiumType').value != 'PAOD'">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " maxlength="15" #ElectricalAmount
                                            (focus)="ElectricalAmount.select()" id="ElectricalAccessoriesValue"
                                            (keydown)="DecimalWithMinus($event)"
                                            formControlName="ElectricalAccessoriesValue" placeholder=" "
                                            autocomplete="off" />
                                        <label for="ElectricalAccessoriesValue" class="">Electrical Accessories
                                            Value</label>
                                    </div>

                                    <!-- Non-Electrical Accessories Value -->
                                    <div class="relative " *ngIf="TransactionEntryForm.get('PremiumType').value != 'SATP' && 
                                        TransactionEntryForm.get('PremiumType').value != 'PAOD'">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " maxlength="15" #NonEleAmount
                                            (focus)="NonEleAmount.select()" id="NonElectricalAccessoriesValue"
                                            formControlName="NonElectricalAccessoriesValue" placeholder=" "
                                            (keydown)="DecimalWithMinus($event)" autocomplete="off" />
                                        <label for="NonElectricalAccessoriesValue" class="">Non-Electrical Accessories
                                            Value</label>
                                    </div>

                                    <!-- Other Fitment Value -->
                                    <div class="relative " *ngIf="TransactionEntryForm.get('PremiumType').value != 'SATP' &&
                                        TransactionEntryForm.get('PremiumType').value != 'PAOD'">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " maxlength="15" #OtherAmount
                                            (focus)="OtherAmount.select()" id="OtherFitmentValue"
                                            formControlName="OtherFitmentValue" placeholder=" "
                                            (keydown)="DecimalWithMinus($event)" autocomplete="off" />
                                        <label for="OtherFitmentValue" class="">Other Fitment Value</label>
                                    </div>

                                    <!-- Total Value -->
                                    <div class="relative " *ngIf="TransactionEntryForm.get('PremiumType').value != 'SATP' &&
                                        TransactionEntryForm.get('PremiumType').value != 'PAOD'">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " Decimal readonly maxlength="15" id="TotalValue"
                                            formControlName="TotalValue" placeholder=" " #TotalValue
                                            (focus)="TotalValue.select()" autocomplete="off" />
                                        <label for="TotalValue" class="">Total Value</label>
                                    </div>
                                </div>

                                <div
                                    *ngIf=" TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.TwoWheeler || TransactionEntryForm.get('SubCategoryCode').value==SubCategoryCodeEnum.PrivateCar">
                                    <!-- Remarks -->
                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <textarea type="text" class="peer  max-h-26 min-h-26" maxlength="120"
                                            id="Remarks" formControlName="Remarks" placeholder=" "
                                            autocomplete="off"></textarea>
                                        <label for="Remarks" class="">Remarks (if any)</label>
                                    </div>
                                </div>



                            </div>
                        </form>

                    </div>

                    <div *ngIf="TransactionEntryForm.get('CategoryCode').value != CategoryCodeEnum.Motor" class="py-5">
                        <form [formGroup]="TransactionEntryForm">

                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4  ">

                                <!-- Plan Name -->
                                <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Life">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="50" id="LifeInsPlanName"
                                        formControlName="LifeInsPlanName" placeholder=" " autocomplete="off" />
                                    <label for="LifeInsPlanName" class="mandatory">Plan Name</label>
                                </div>
                                <!-- Name Of Policy Holder-->
                                <div class="relative " *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Life">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="50" id="NameProposal"
                                        formControlName="NameProposal" placeholder=" " autocomplete="off" />
                                    <label for="NameProposal" class="mandatory">Name Of Policy Holder</label>
                                </div>
                                <!-- Name Of Life Assured -->
                                <div class="relative " *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Life">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="50" id="NameofLifeAssured"
                                        formControlName="NameofLifeAssured" placeholder=" " autocomplete="off" />
                                    <label for="NameofLifeAssured" class="mandatory">Name Of Life Assured </label>
                                </div>
                                <!-- Premium Installment Type -->
                                <div class="relative " *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Life">
                                    <div class="icon">
                                        <mat-icon>payment</mat-icon>
                                    </div>
                                    <select class="peer bg-white" name="PremiumPaymentTypeName"
                                        formControlName="PremiumPaymentType">
                                        <option *ngFor="let item of DisplayedLifePremiumPaymentType"
                                            value="{{item.value}}">
                                            {{item.name}}
                                        </option>
                                    </select>
                                    <label for="PremiumPaymentTypeName" class="mandatory">Premium Payment Type</label>
                                </div>
                                <!-- Premium Paying Terms-->
                                <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Life">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " Onlynumber maxlength="50" id="PremiumPayingTerm"
                                        formControlName="PremiumPayingTerm" placeholder=" " autocomplete="off" />
                                    <label for="PremiumPayingTerm" class="mandatory">Premium Paying Term (Year)</label>
                                </div>
                                <!-- PolicyTerms -->
                                <div class="relative " *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Life">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="15" Decimal id="PolicyTerms"
                                        (change)="setPolicyEndDateForLife()" formControlName="PolicyTerms"
                                        placeholder=" " Onlynumber autocomplete="off" />
                                    <label for="PolicyTerms" class="mandatory">Policy term - Year</label>
                                </div>

                                <!-- Policy Number -->
                                <div class="relative ">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " uppercase maxlength="50" id="PolicyNo"
                                        formControlName="PolicyNo" placeholder=" " autocomplete="off" />
                                    <label for="PolicyNo" class="mandatory">Policy Number</label>
                                </div>

                                <!--Proposal Submission Date -->
                                <div class="relative ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="SubmissionDate"></mat-datepicker-toggle>
                                            <mat-datepicker #SubmissionDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="SubmissionDate" class="peer"
                                            (blur)="validateDate($event,'SubmissionDate')"
                                            formControlName="SubmissionDate" placeholder="__/__/____" datemask
                                            [matDatepicker]="SubmissionDate" autocomplete="off">
                                        <label for="SubmissionDate" class="mandatory">Proposal Submission Date</label>
                                    </div>
                                </div>

                                <!-- Issue Date -->
                                <div class="relative ">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="IssueDate"></mat-datepicker-toggle>
                                            <mat-datepicker #IssueDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="IssueDate" class="peer"
                                            (blur)="validateDate($event,'IssueDate')" formControlName="IssueDate"
                                            placeholder="__/__/____" datemask [matDatepicker]="IssueDate"
                                            autocomplete="off">
                                        <label for="IssueDate" class="mandatory">Policy Issue Date</label>
                                    </div>
                                </div>

                                <!-- Sum Insured -->
                                <div class="relative ">
                                    <div class="icon rs"></div>
                                    <input type="text" class="peer " maxlength="15" id="SumInsured"
                                        formControlName="SumInsured" (keydown)="DecimalWithMinus($event)" #SumInsured
                                        (focus)="SumInsured.select()" placeholder=" " autocomplete="off" />
                                    <label for="SumInsured" class="mandatory">Sum Insured</label>
                                </div>

                                <!-- Policy Period Dropdown && Only displayed when Category is HEALTH -->
                                <div class="relative" *ngIf="TransactionEntryForm.get('CategoryId').value == '2'">
                                    <div class="icon">
                                        <mat-icon>group_work</mat-icon>
                                    </div>

                                    <select id="" formControlName="PolicyPeriod">
                                        <option value="">--Select--</option>
                                        <option [value]="1">1 Year</option>
                                        <option [value]="2">2 Years</option>
                                        <option [value]="3">3 Years</option>
                                    </select>
                                    <label for="PolicyPeriod" class="mandatory">Policy Period</label>
                                </div>

                                <!-- Only displayed when Category is HEALTH -->
                                <div class="relative"
                                    *ngIf="TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Health">
                                    <div class="grid sm:grid-cols-2 lg:grid-cols-2 gap-4  ">
                                        <!-- Start Date -->
                                        <div class="relative ">
                                            <div class="flex">
                                                <div class="icon">
                                                    <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                        [for]="PolicyStartDate"></mat-datepicker-toggle>
                                                    <mat-datepicker #PolicyStartDate></mat-datepicker>
                                                </div>
                                                <input matInput type="text" class="peer"
                                                    (blur)="validateDate($event,'StartDate')"
                                                    formControlName="StartDate" (dateInput)="_calculatePolicyEndDate()"
                                                    placeholder="__/__/____" datemask [matDatepicker]="PolicyStartDate"
                                                    autocomplete="off">
                                                <label for="PolicyStartDate" class="mandatory">Policy Start Date</label>
                                            </div>
                                        </div>

                                        <!-- End Date -->
                                        <div class="relative ">
                                            <div class="flex">
                                                <div class="icon">
                                                    <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                        [for]="EndDate"></mat-datepicker-toggle>
                                                    <mat-datepicker #EndDate></mat-datepicker>
                                                </div>
                                                <input matInput type="text" id="EndDate" class="peer"
                                                    (blur)="validateDate($event,'EndDate')" [min]="f['StartDate'].value"
                                                    formControlName="EndDate" placeholder="__/__/____" datemask
                                                    [matDatepicker]="EndDate" autocomplete="off">
                                                <label for="EndDate" class="mandatory">Policy End Date</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Start Date -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('CategoryCode').value != CategoryCodeEnum.Health">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="StartDate"></mat-datepicker-toggle>
                                            <mat-datepicker #StartDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="StartDate" class="peer"
                                            (blur)="validateDate($event,'StartDate')" formControlName="StartDate"
                                            (dateInput)="_calculatePolicyEndDate()" placeholder="__/__/____" datemask
                                            [matDatepicker]="StartDate" autocomplete="off">
                                        <label for="StartDate" class="mandatory">Policy Start Date</label>
                                    </div>
                                </div>

                                <!-- End Date -->
                                <div class="relative "
                                    *ngIf="TransactionEntryForm.get('CategoryCode').value != CategoryCodeEnum.Health">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="EndDate"></mat-datepicker-toggle>
                                            <mat-datepicker #EndDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="EndDate" class="peer"
                                            (blur)="validateDate($event,'EndDate')" [min]="f['StartDate'].value"
                                            formControlName="EndDate" placeholder="__/__/____" datemask
                                            [matDatepicker]="EndDate" autocomplete="off">
                                        <label for="EndDate" class="mandatory">Policy End Date</label>
                                    </div>
                                </div>

                                <!--Date of Birth -->
                                <div class="relative " *ngIf="(TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Health ||
                            TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.PA)">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix [for]="DateOfBirth"></mat-datepicker-toggle>
                                            <mat-datepicker #DateOfBirth></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="DateOfBirth" class="peer" 
                                            formControlName="DateOfBirth" placeholder="__/__/____" datemask [matDatepicker]="DateOfBirth"
                                            autocomplete="off" [max]="currentDate" />
                                        <label for="DateOfBirth" class="mandatory">Date of Birth</label>
                                    </div>
                                </div>

                                <!-- Per Billing Limit -->
                                <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Marine">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="15" id="PerBillingLimit"
                                        formControlName="PerBillingLimit" (keydown)="DecimalWithMinus($event)"
                                        placeholder=" " value="12 Months" onfocus="this.select()" autocomplete="off" />
                                    <label for="PerBillingLimit">Per Billing Limit(PBL)</label>
                                </div>


                                <!-- Per Location Limit -->
                                <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Marine">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="15" id="PolicyTerms"
                                        formControlName="PerLocationLimit" (keydown)="DecimalWithMinus($event)"
                                        placeholder=" " value="12 Months" onfocus="this.select()" autocomplete="off" />
                                    <label for="PerLocationLimit">Per Location Limit(PLL)</label>
                                </div>



                                <!-- Premium Installment Type -->
                                <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Health ||
                                f['CategoryCode'].value == CategoryCodeEnum.Group ||
                                f['CategoryCode'].value == CategoryCodeEnum.Life||
                                f['CategoryCode'].value == CategoryCodeEnum.Fire||
                                f['CategoryCode'].value == CategoryCodeEnum.Engineering">
                                    <div class="icon">
                                        <mat-icon>payment</mat-icon>
                                    </div>
                                    <select class="peer bg-white" name="PremiumInstallmentType"
                                        formControlName="PremiumInstallmentType">
                                        <option value="">Select</option>
                                        <option
                                            *ngFor="let option of DropdownMaster.PremiumInstallmentTypeButtonOptions"
                                            [value]="option.value">
                                            {{ option.name }}
                                        </option>
                                    </select>
                                    <label for="PremiumInstallmentType" class="mandatory">Premium installment
                                        Type</label>
                                </div>


                                <!--  Premium Installment Amount -->
                                <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Fire||
                                            f['CategoryCode'].value == CategoryCodeEnum.Engineering">
                                    <div class="icon rs"></div>
                                    <input type="text" class="peer " maxlength="15"
                                        formControlName="PremiumInstallmentAmount" (keydown)="DecimalWithMinus($event)"
                                        id="PremiumInstallmentAmount" placeholder=" " #PremiumInstallmentAmount
                                        (focus)="PremiumInstallmentAmount.select()" autocomplete="off" />
                                    <label for="PremiumInstallmentAmount" class="mandatory"> Premium Installment
                                        Amount</label>
                                </div>

                                <!--  Next Premium Date -->
                                <div class="relative " *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Fire ||
                                         f['CategoryCode'].value == CategoryCodeEnum.Health ||
                                         f['CategoryCode'].value == CategoryCodeEnum.Life ||
                                         f['CategoryCode'].value == CategoryCodeEnum.Engineering ||
                                         f['CategoryCode'].value == CategoryCodeEnum.Group">
                                    <div class="flex">
                                        <div class="icon">
                                            <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                [for]="NextPremiumDate"></mat-datepicker-toggle>
                                            <mat-datepicker #NextPremiumDate></mat-datepicker>
                                        </div>
                                        <input matInput type="text" id="NextPremiumDate" class="peer"
                                            formControlName="NextPremiumPaymentDate" placeholder="__/__/____" datemask
                                            [matDatepicker]="NextPremiumDate" autocomplete="off">
                                        <label for="NextPremiumDate" class="mandatory">Next Premium Date</label>
                                    </div>
                                </div>

                                <!-- PolicyTerms -->
                                <div class="relative"
                                    *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Fire || f['CategoryCode'].value == CategoryCodeEnum.Engineering">
                                    <div class="icon">
                                        <mat-icon>tonality</mat-icon>
                                    </div>
                                    <input type="text" class="peer " maxlength="15" Decimal id="PolicyTerms"
                                        formControlName="PolicyTerms" placeholder=" " value="12 Months"
                                        onfocus="this.select()" autocomplete="off" />
                                    <label for="PolicyTerms" class="mandatory">Policy terms - Months</label>
                                </div>


                                <!-- Remarks -->
                                <div class="row-span-2">
                                    <div class="relative  ">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <textarea type="text" class="peer max-h-26 min-h-26" maxlength="120"
                                            id="Remarks" formControlName="Remark" placeholder=" "
                                            autocomplete="off"></textarea>
                                        <label for="Remarks" class="">Remarks (if any)</label>
                                    </div>
                                </div>

                            </div>

                        </form>

                    </div>

                    <div *ngIf="!isExpand">
                        <button class="form-button m-2" mat-button matStepperPrevious>Back</button>
                        <button class="form-button m-2" mat-button (click)="PolicyInformationError()"
                            matStepperNext>Next</button>
                    </div>

                </mat-step>


                <mat-step label="Premium Details" [stepControl]="PremiumInformationValidations()">

                    <div *ngIf="TransactionEntryForm.get('CategoryCode').value == CategoryCodeEnum.Motor" class="py-5">
                        <form [formGroup]="TransactionEntryForm">

                            <div formGroupName="PremiumDetail"
                                class="grid md:grid-cols-2 overflow-auto lg:grid-cols-5 gap-18">

                                <div class="space-y-4 lg:col-span-2 lg:min-w-[374.5px]">

                                    <p class="font-bold">OWN DAMAGE</p>

                                    <!-- Basic OD Premium -->
                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <input type="text" class="peer " #ODAmount (focus)="ODAmount.select()"
                                            maxlength="15" (keydown)="DecimalWithMinus($event)" id="BasicODPremium"
                                            formControlName="BasicODPremium" placeholder=" " autocomplete="off" />
                                        <label for="BasicODPremium" class="mandatory">Basic OD Premium</label>
                                    </div>

                                    <div class="grid lg:grid-cols-2 md:grid-cols-1 sm:grid-cols-1 gap-4">

                                        <div class="relative ">
                                            <div class="icon">
                                                <mat-icon>percent</mat-icon>
                                            </div>
                                            <select id="NCBPer" formControlName="NCBPer">
                                                <!-- 0%, 20%, 25%, 35%, 45% 50%-->
                                                <option value={{per.percentage}} *ngFor="let per of NCBpercentageList"
                                                    [disabled]="(TransactionEntryForm.get('VehicleDetail.AnyClaiminPreviousYear').value == 'true')">
                                                    {{per.PerDisplay}}</option>
                                            </select>
                                            <label for="Category" class="mandatory">NCB %</label>
                                        </div>

                                        <!-- NCB Premium -->
                                        <div class="relative ">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer " readonly Decimal maxlength="15"
                                                (change)="ODPremiumChange()" formControlName="NCBPremium"
                                                id="NCBPremium" placeholder=" " #NCBPremium
                                                (focus)="NCBPremium.select()" autocomplete="off" />
                                            <label for="NCBPremium" class="">NCB Amount</label>
                                        </div>

                                        <!-- Discount Per -->
                                        <div class="relative ">
                                            <div class="icon">
                                                <mat-icon>percent</mat-icon>
                                            </div>
                                            <input type="text" class="peer " #DiscountPer (focus)="DiscountPer.select()"
                                                Percentage maxlength="5" formControlName="DiscountPer" id="DiscountPer"
                                                placeholder=" " autocomplete="off" />
                                            <label for="DiscountPer" class="mandatory">Discount %</label>
                                        </div>

                                        <!-- remove Field In V-20 -->
                                        <!-- Discount Amount -->
                                        <div class="relative ">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer " maxlength="15" #DiscountAmount
                                                (focus)="DiscountAmount.select()" (keydown)="DecimalWithMinus($event)"
                                                formControlName="DiscountAmount" id="DiscountAmount" placeholder=" "
                                                autocomplete="off" />
                                            <label for="DiscountAmount" class="">Discount Amount</label>
                                        </div>

                                    </div>

                                    <!-- Net OD Premium -->
                                    <div class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " readonly Decimal maxlength="15"
                                            (change)="ODPremiumChange()" id="NetODPremium"
                                            formControlName="NetODPremium" placeholder=" " autocomplete="off" />
                                        <label for="NetODPremium" class="mandatory">Net OD Premium</label>
                                    </div>

                                    <!-- Add-On Premium -->
                                    <div class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " #AddOnAmount (focus)="AddOnAmount.select()"
                                            (keydown)="DecimalWithMinus($event)" maxlength="15" id="AddOnPremium"
                                            formControlName="AddOnPremium" placeholder=" " autocomplete="off" />
                                        <label for="AddOnPremium" class="mandatory">Add-On Premium</label>
                                    </div>

                                    <!-- Total OD Without Tax Premium -->
                                    <div class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " readonly (change)="ODPremiumChange()"
                                            maxlength="15" id="TotalODPremium" formControlName="TotalODPremium"
                                            placeholder=" " #TotalODPremium (focus)="TotalODPremium.select()"
                                            autocomplete="off" />
                                        <label for="TotalODPremium" class="mandatory">Total OD Premium</label>
                                    </div>

                                    <div class="grid lg:grid-cols-2 gap-4">

                                        <!-- OD GST Per -->
                                        <div class="relative ">
                                            <div class="icon">
                                                <mat-icon>percent</mat-icon>
                                            </div>
                                            <input type="text" class="peer " #ODGSTPerAmount
                                                (focus)="ODGSTPerAmount.select()" Percentage maxlength="5"
                                                formControlName="ODGSTPer" id="ODGSTPer" placeholder=" "
                                                autocomplete="off" />
                                            <label for="ODGSTPer" class="mandatory">Total OD GST %</label>
                                        </div>

                                        <!-- OD GST Premium -->
                                        <div class="relative ">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer " readonly Decimal
                                                (change)="ODPremiumChange()" maxlength="15"
                                                formControlName="ODGSTAmount" id="ODGSTAmount" placeholder=" "
                                                #ODGSTAmount (focus)="ODGSTAmount.select()" autocomplete="off" />
                                            <label for="ODGSTAmount" class="mandatory">Total OD GST Amt.</label>
                                        </div>

                                    </div>

                                </div>

                                <div class="space-y-4 md:min-w-[441px] lg:col-span-2">

                                    <p class="font-bold">LIABILITY</p>

                                    <!-- Basic TP Premium -->
                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <input type="text" class="peer " maxlength="15" #BasicAmount
                                            (focus)="BasicAmount.select()" (keydown)="DecimalWithMinus($event)"
                                            id="BasicTPPremium" formControlName="BasicTPPremium" placeholder=" "
                                            autocomplete="off" />
                                        <label for="BasicTPPremium" class="mandatory">Basic TP Premium</label>
                                    </div>

                                    <div class="grid sm:grid-cols-[minmax(130px,140px)_1fr] gap-4 items-center">

                                        <!-- Paid Driver -->
                                        <!-- (change)="getTPAddOnPremiumAmount()" -->
                                        <div class="lableInputbox">
                                            <input type="checkbox" class="peer "
                                                (change)="onChange($event, 'PaidDriver')" formControlName="PaidDriver"
                                                id="PaidDriver" value="true" />
                                            <label for="PaidDriver" class="">Paid Driver</label>
                                        </div>

                                        <!-- Paid Driver Premium -->
                                        <div class="relative ">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer "
                                                [readOnly]="!TransactionEntryForm.get('PremiumDetail.PaidDriver').value"
                                                maxlength="15" (keydown)="DecimalWithMinus($event)"
                                                (input)="ODPremiumChange()" (change)="ODPremiumChange()"
                                                onfocus="this.select()" formControlName="PaidDriverPremium"
                                                id="PaidDriverPremium" placeholder=" " autocomplete="off" />
                                            <label for="PaidDriverPremium" class="">PD Amount</label>
                                        </div>

                                        <!-- LL Driver -->
                                        <!-- (change)="getTPAddOnPremiumAmount()" -->
                                        <div class="lableInputbox">
                                            <input type="checkbox" class="peer " (change)="onChange($event, 'LLDriver')"
                                                formControlName="LLDriver" id="LLDriver" value="true" />
                                            <label for="LLDriver" class="">LL Driver</label>
                                        </div>

                                        <!-- LL Driver Premium -->
                                        <div class="relative ">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer "
                                                [readOnly]="!TransactionEntryForm.get('PremiumDetail.LLDriver').value"
                                                maxlength="15" (keydown)="DecimalWithMinus($event)"
                                                (input)="ODPremiumChange()" (change)="ODPremiumChange()"
                                                onfocus="this.select()" formControlName="LLDriverPremium"
                                                id="LLDriverPremium" placeholder=" " onfocus="this.select()"
                                                autocomplete="off" />
                                            <label for="LLDriverPremium" class="">LL Amount</label>
                                        </div>

                                        <!-- CNG -->
                                        <!-- (change)="getTPAddOnPremiumAmount()" -->
                                        <div class="lableInputbox"
                                            *ngIf="TransactionEntryForm.get('VehicleDetail.FuelType').value != 'Diesel' && TransactionEntryForm.get('SubCategoryCode').value != SubCategoryCodeEnum.TwoWheeler">
                                            <input type="checkbox" class="peer " (change)="onChange($event, 'CNG')"
                                                formControlName="CNG" id="CNG" value="true" />
                                            <label for="CNG" class="">CNG</label>
                                        </div>

                                        <!-- CNG Premium -->
                                        <div class="relative "
                                            *ngIf="TransactionEntryForm.get('VehicleDetail.FuelType').value != 'Diesel' && TransactionEntryForm.get('SubCategoryCode').value != SubCategoryCodeEnum.TwoWheeler">
                                            <div class="icon rs"></div>

                                            <input type="text" class="peer "
                                                [readOnly]="!TransactionEntryForm.get('PremiumDetail.CNG').value"
                                                maxlength="15" (keydown)="DecimalWithMinus($event)"
                                                onfocus="this.select()" (input)="ODPremiumChange()"
                                                (change)="ODPremiumChange()" formControlName="CNGAmount" id="CNGAmount"
                                                placeholder=" " autocomplete="off" />
                                            <label for="CNGAmount" class="">CNG Amount</label>
                                        </div>


                                        <!-- Owner Driver -->
                                        <!-- (change)="getTPAddOnPremiumAmount()" -->
                                        <div class="lableInputbox w-44">
                                            <input type="checkbox" class="peer "
                                                (change)="onChange($event, 'OwnerDriver')" formControlName="OwnerDriver"
                                                id="OwnerDriver" value="true" />
                                            <label for="OwnerDriver" class="w-full"
                                                [ngClass]="TransactionEntryForm.get('PremiumType').value=='PAOD' ? 'mandatory' : ''">
                                                PA Owner Driver
                                            </label>
                                        </div>

                                        <!-- Owner Driver Premium -->
                                        <div class="relative ">
                                            <div class="icon rs"></div>

                                            <input type="text" class="peer "
                                                [readOnly]="!TransactionEntryForm.get('PremiumDetail.OwnerDriver').value"
                                                maxlength="15" (keydown)="DecimalWithMinus($event)"
                                                (input)="ODPremiumChange()" (change)="ODPremiumChange()"
                                                onfocus="this.select()" formControlName="OwnerDriverPremium"
                                                id="OwnerDriverPremium" placeholder=" " autocomplete="off" />
                                            <label for="OwnerDriverPremium" class="">PA OD Amount</label>
                                        </div>

                                        <!-- PA -->
                                        <!-- (change)="getTPAddOnPremiumAmount()" -->
                                        <div class="lableInputbox">
                                            <input type="checkbox" class="peer " (change)="onChange($event, 'PA')"
                                                formControlName="PA" id="PA" value="true" />
                                            <label for="PA" class="">Passenger PA</label>
                                        </div>


                                        <div class="grid md:grid-cols-2 gap-4 items-center">
                                            <!-- PASumInsure -->
                                            <div class="relative">
                                                <div class="icon rs invi"></div>
                                                <select class="peer bg-white" formControlName="PASumInsure"
                                                    id="PASumInsure">
                                                    <option
                                                        [disabled]="!TransactionEntryForm.get('PremiumDetail.PA').value"
                                                        value="">Select</option>
                                                    <option *ngFor="let option of PassengerPAList"
                                                        [value]="option.PassengerPA"
                                                        [disabled]="!TransactionEntryForm.get('PremiumDetail.PA').value">
                                                        {{ option.PassengerPA }}
                                                    </option>
                                                </select>
                                                <label for="PASumInsure" class="">PA SI</label>
                                            </div>

                                            <!-- PA Premium -->
                                            <!-- [readOnly]="true" -->
                                            <div class="relative">
                                                <div class="icon rs"></div>
                                                <input type="text" class="peer " (input)="ODPremiumChange()"
                                                    (change)="ODPremiumChange()" maxlength="15"
                                                    formControlName="PAPremium" onfocus="this.select()" id="PAPremium"
                                                    placeholder=" " autocomplete="off" />
                                                <label for="PAPremium" class="">PA Amount</label>
                                            </div>
                                        </div>
                                    </div>


                                    <!-- Other Liability Premium -->
                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <input type="text" class="peer " Decimal readonly (change)="ODPremiumChange()"
                                            maxlength="120" id="OtherLiabilityPremium"
                                            formControlName="OtherLiabilityPremium" placeholder=" "
                                            onfocus="this.select()" autocomplete="off" />
                                        <label for="OtherLiabilityPremium" class="mandatory">Other Liability
                                            Premium</label>
                                    </div>

                                    <!-- Total Liability Premium -->
                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <input type="text" class="peer " Decimal readonly (change)="ODPremiumChange()"
                                            maxlength="120" id="TotalTPPremium" formControlName="TotalTPPremium"
                                            placeholder=" " onfocus="this.select()" autocomplete="off" />
                                        <label for="TotalTPPremium" class="mandatory">Total Liability Premium</label>
                                    </div>

                                    <div class="grid md:grid-cols-2 gap-4">
                                        <!-- TP GST Per -->
                                        <div class="relative ">
                                            <div class="icon">
                                                <mat-icon>percent</mat-icon>
                                            </div>
                                            <input type="text" class="peer " #TPGSTPerAmount
                                                (focus)="TPGSTPerAmount.select()" Percentage maxlength="5"
                                                formControlName="TPGSTPer" id="TPGSTPer" placeholder=" "
                                                autocomplete="off" />
                                            <label for="TPGSTPer" class="mandatory">Basic TP GST %</label>
                                        </div>

                                        <!-- TPGST Premium -->
                                        <div class="relative ">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer " readonly Decimal
                                                (change)="ODPremiumChange()" maxlength="15"
                                                formControlName="TPGSTAmount" id="TPGSTAmount" placeholder=" "
                                                onfocus="this.select()" autocomplete="off" />
                                            <label for="TPGSTAmount" class="mandatory">Basic TP GST Amt.</label>
                                        </div>

                                        <!-- Other Liability GST Per -->
                                        <div class="relative ">
                                            <div class="icon">
                                                <mat-icon>percent</mat-icon>
                                            </div>
                                            <input type="text" class="peer " #OtherLiabilityAmount
                                                (focus)="OtherLiabilityAmount.select()" Percentage maxlength="5"
                                                formControlName="OtherLiabilityGSTPer" id="OtherLiabilityGSTPer"
                                                placeholder=" " autocomplete="off" />
                                            <label for="OtherLiabilityGSTPer" class="mandatory">Other Liability GST
                                                %</label>
                                        </div>

                                        <!-- Other Liability GST Amount -->
                                        <div class="relative ">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer " readonly Decimal
                                                (change)="ODPremiumChange()" maxlength="120"
                                                formControlName="OtherLiabilityGSTAmount" id="OtherLiabilityGSTAmount"
                                                placeholder=" " onfocus="this.select()" autocomplete="off" />
                                            <label for="OtherLiabilityGSTAmount" class="mandatory">Other Liability GST
                                                Amt.</label>
                                        </div>

                                    </div>

                                    <!-- Net Premium -->
                                    <div class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " readonly Decimal (change)="ODPremiumChange()"
                                            maxlength="15" id="TotalPremium" formControlName="TotalPremium"
                                            placeholder=" " onfocus="this.select()" autocomplete="off" />
                                        <label for="TotalPremium" class="mandatory">Net Premium (Total OD Premium +
                                            Total Liability)</label>
                                    </div>

                                    <!-- Total Policy Premium -->
                                    <div class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " readonly Decimal (change)="ODPremiumChange()"
                                            maxlength="15" id="TotalNetPremium" formControlName="TotalNetPremium"
                                            placeholder=" " onfocus="this.select()" autocomplete="off" />
                                        <label for="TotalNetPremium" class="mandatory">Total Policy Premium - As
                                            Calculated</label>
                                    </div>

                                    <!-- Total Policy Premium - According to Policy -->
                                    <div class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " (keydown)="DecimalWithMinus($event)"
                                            (change)="ODPremiumChange()" maxlength="15" id="TotalPolicyPremium"
                                            formControlName="TotalPolicyPremium" placeholder=" " #TotalPolicyPremium
                                            (focus)="TotalPolicyPremium.select()" autocomplete="off" />
                                        <label for="TotalPolicyPremium" class="mandatory">Total Policy Premium -
                                            According to Policy</label>
                                    </div>

                                </div>

                            </div>
                        </form>


                    </div>

                    <div *ngIf="TransactionEntryForm.get('CategoryCode').value != CategoryCodeEnum.Motor">

                        <div class="p-4 h-full w-full">
                            <!-- region form -->
                            <form [formGroup]="PremiumDetailForm">
                                <div class="grid lg:grid-cols-3 md:grid-cols-2 gap-5 mt-4 grid-cols-2">
                                    <div class="space-y-4 min-w-72">


                                        <!-- Total Person -->
                                        <div class="relative"
                                            *ngIf="f['CategoryCode'].value == CategoryCodeEnum.WorkmenComp">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" Decimal maxlength="15" id="TotalPerson"
                                                formControlName="TotalPerson" placeholder=" " onfocus="this.select()"
                                                autocomplete="off" />
                                            <label for="TotalPerson" class="mandatory">Total Person</label>
                                        </div>

                                        <!-- Wages -->
                                        <div class="relative"
                                            *ngIf="f['CategoryCode'].value == CategoryCodeEnum.WorkmenComp">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" Decimal maxlength="15" id="Wages"
                                                formControlName="Wages" placeholder=" " onfocus="this.select()"
                                                autocomplete="off" />
                                            <label for="Wages" class="mandatory">Wages</label>
                                        </div>

                                        <!-- Medical Expense Limit Type -->
                                        <div class="relative"
                                            *ngIf="f['CategoryCode'].value == CategoryCodeEnum.WorkmenComp">
                                            <div class="icon">
                                                <mat-icon>tonality</mat-icon>
                                            </div>
                                            <select id="MedicalExpenseLimitType"
                                                formControlName="MedicalExpenseLimitType">
                                                <option value="">--Select--</option>
                                                <option *ngFor="let Product of MedicalExpenseLimitType | async"
                                                    [value]="Product">
                                                    {{ Product }}
                                                </option>
                                            </select>
                                            <label for="MedicalExpenseLimitType" class="mandatory">Medical Expense Limit
                                                Type</label>
                                        </div>

                                        <!-- Value -->
                                        <div class="relative"
                                            *ngIf="f['CategoryCode'].value == CategoryCodeEnum.WorkmenComp">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer"
                                                [readOnly]="PremiumDetailForm.get('MedicalExpenseLimitType').value == 'Not Applicable'"
                                                maxlength="15" (keydown)="DecimalWithMinus($event)"
                                                id="MedicalExpenseValue" formControlName="MedicalExpenseValue"
                                                placeholder=" " onfocus="this.select()" autocomplete="off" />
                                            <label for="MedicalExpenseValue" class="mandatory">Value</label>
                                        </div>

                                        <!-- Basic Premium -->
                                        <div class="relative">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" #BasicPremiumAmount
                                                (focus)="BasicPremiumAmount.select()"
                                                (keydown)="DecimalWithMinus($event)" maxlength="15" id="BasicODPremium"
                                                formControlName="BasicPremium" placeholder=" " onfocus="this.select()"
                                                autocomplete="off" />
                                            <label for="BasicODPremium" class="mandatory">Basic Premium</label>
                                        </div>

                                        <!-- Discount % -->
                                        <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Fire ||
                                            f['CategoryCode'].value == CategoryCodeEnum.Engineering ||f['CategoryCode'].value == CategoryCodeEnum.WorkmenComp
                                            || f['CategoryCode'].value == CategoryCodeEnum.Marine">
                                            <div class="icon">
                                                <mat-icon>percent</mat-icon>
                                            </div>
                                            <input type="text" Percentage class="peer" #DiscountPer
                                                (focus)="DiscountPer.select()" maxlength="5" autocomplete="off"
                                                formControlName="DiscountPer" id="DiscountPer" placeholder=" " />
                                            <label for="DiscountPer" class="mandatory">Discount %</label>
                                        </div>

                                        <!-- Medical Premium -->
                                        <div class="relative"
                                            *ngIf="f['CategoryCode'].value == CategoryCodeEnum.WorkmenComp">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" #MedicalPremiumAmount
                                                (focus)="MedicalPremiumAmount.select()" autocomplete="off"
                                                (keydown)="DecimalWithMinus($event)" maxlength="15" id="MedicalPremium"
                                                formControlName="MedicalPremium" placeholder=" "
                                                onfocus="this.select()" />
                                            <label for="MedicalPremium" class="mandatory">Medical Premium</label>
                                        </div>

                                        <!-- Insurance Company Receipt No -->
                                        <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Life">
                                            <div class="icon">
                                                <mat-icon>tonality</mat-icon>
                                            </div>
                                            <input type="text" class="peer" maxlength="50" id="ReceiptNo"
                                                formControlName="ReceiptNo" placeholder=" " autocomplete="off" />
                                            <label for="ReceiptNo">Insurance Company Receipt No</label>
                                        </div>

                                        <!-- Insurance Company Receipt Date -->
                                        <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Life">
                                            <div class="flex">
                                                <div class="icon">
                                                    <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                        [for]="ReceiptDate"></mat-datepicker-toggle>
                                                    <mat-datepicker #ReceiptDate></mat-datepicker>
                                                </div>
                                                <input matInput type="text" id="ReceiptDate" class="peer"
                                                    autocomplete="off" (blur)="validateDate($event,'ReceiptDate')"
                                                    formControlName="ReceiptDate" placeholder="__/__/____" datemask
                                                    [matDatepicker]="ReceiptDate">
                                                <label for="ReceiptDate">Insurance Company Receipt Date</label>
                                            </div>
                                        </div>


                                        <!-- Basic Premium After Discount -->
                                        <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Fire ||
                                            f['CategoryCode'].value == CategoryCodeEnum.Engineering">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" readonly #BasicPremiumAfterDiscount
                                                autocomplete="off" (focus)="BasicPremiumAfterDiscount.select()" Decimal
                                                maxlength="15" id="BasicPremiumAfterDiscount"
                                                formControlName="BasicPremiumAfterDiscount" placeholder=" " />
                                            <label for="BasicPremiumAfterDiscount" class="mandatory">Basic Premium After
                                                Discount</label>
                                        </div>

                                        <!-- Terrorism Premium -->
                                        <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Fire ||
                                            f['CategoryCode'].value == CategoryCodeEnum.Engineering">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" #TerrorismPremium autocomplete="off"
                                                (focus)="TerrorismPremium.select()" (keydown)="DecimalWithMinus($event)"
                                                maxlength="15" id="TerrorismPremium" formControlName="TerrorismPremium"
                                                placeholder=" " />
                                            <label for="TerrorismPremium" class="mandatory">Terrorism Premium</label>
                                        </div>

                                        <!-- Add on Premium -->
                                        <div class="relative" *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Fire ||
                                            f['CategoryCode'].value == CategoryCodeEnum.Engineering">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" #AddOnPremium
                                                (focus)="AddOnPremium.select()" (keydown)="DecimalWithMinus($event)"
                                                maxlength="15" id="AddOnPremium" formControlName="AddOnPremium"
                                                placeholder=" " autocomplete="off" />
                                            <!-- class="mandatory" -->
                                            <label for="AddOnPremium">Add on Premium</label>
                                        </div>

                                        <!-- Stamp Duty -->
                                        <div class="relative"
                                            *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Marine">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" #StampDuty (focus)="StampDuty.select()"
                                                (keydown)="DecimalWithMinus($event)" maxlength="15" id="StampDuty"
                                                formControlName="StampDuty" placeholder=" " autocomplete="off" />
                                            <label for="StampDuty" class="mandatory">Stamp Duty</label>
                                        </div>

                                        <!-- Net Premium -->
                                        <div class="relative"
                                            *ngIf="f['CategoryCode'].value == CategoryCodeEnum.Fire ||
                                            f['CategoryCode'].value == CategoryCodeEnum.Engineering || f['CategoryCode'].value == CategoryCodeEnum.Marine">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" readonly #TotalPremium
                                                (focus)="TotalPremium.select()" Decimal maxlength="15" id="TotalPremium"
                                                formControlName="TotalPremium" placeholder=" " autocomplete="off" />
                                            <label for="TotalPremium" class="mandatory">Net Premium</label>
                                        </div>



                                        <div class="grid md:grid-cols-2 gap-4">
                                            <!-- GST Per -->
                                            <div class="relative">
                                                <div class="icon">
                                                    <mat-icon>percent</mat-icon>
                                                </div>
                                                <input type="text" class="peer" #GSTPerAmount
                                                    (focus)="GSTPerAmount.select()" Percentage maxlength="5"
                                                    formControlName="GSTPer" id="GSTPer" placeholder=" "
                                                    autocomplete="off" />
                                                <label for="GSTPer" class="mandatory">GST %</label>
                                            </div>

                                            <!-- GST Amount -->
                                            <div class="relative">
                                                <div class="icon rs"></div>
                                                <input type="text" class="peer" readonly maxlength="15"
                                                    formControlName="GSTAmount" id="GSTAmount" placeholder=" "
                                                    onfocus="this.select()" autocomplete="off" />
                                                <label for="GSTAmount" class="">GST Amount</label>
                                            </div>
                                        </div>

                                        <!-- Total Premium -->
                                        <div class="relative">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer" readonly Decimal maxlength="15"
                                                id="TotalNetPremium" formControlName="TotalNetPremium" placeholder=" "
                                                onfocus="this.select()" autocomplete="off" />
                                            <label for="TotalNetPremium" class="mandatory">Total Premium</label>
                                        </div>

                                        <div class="relative min-w-80">
                                            <div class="icon rs"></div>
                                            <input type="text" class="peer " maxlength="15" id="TotalPolicyPremium"
                                                formControlName="TotalPolicyPremium" autocomplete="off"
                                                (keydown)="DecimalWithMinus($event)" placeholder=" "
                                                onfocus="this.select()" />
                                            <label for="TotalPolicyPremium" class="mandatory">Total Policy Premium -
                                                According to Policy</label>
                                        </div>



                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div *ngIf="!isExpand">
                        <button class="form-button m-2" mat-button matStepperPrevious>Back</button>
                        <button class="form-button m-2" mat-button matStepperNext
                            (click)="PremiumInformationError()">Next</button>
                    </div>

                </mat-step>

                <!-- Third stepper -->
                <mat-step label="Team Details">


                    <div class="p-4 h-full w-full">


                        <!-- region form -->
                        <div>
                            <form [formGroup]="TransactionEntryForm">

                                <div class="grid lg:grid-cols-3 md:grid-cols-2  gap-5 mt-4 grid-cols-1">

                                    <!-- Sales Person -->
                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon>person</mat-icon>
                                        </div>

                                        <div class="flex">
                                            <input type="text" class="peer " formControlName="SalesPersonName"
                                                placeholder=" " id="SalesPerson" [readOnly]="IsSalesPersonReadOnly"
                                                [matAutocomplete]="SalesSearch" autocomplete="off" />
                                            <mat-autocomplete #SalesSearch="matAutocomplete"
                                                (optionSelected)="AutocompleteSelectedEvent($event,'Sales')">
                                                <mat-option *ngFor="let Sales of SalesPerson$ | async" [value]="Sales">
                                                    {{Sales.FullName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <button class="-m-5 z-10" type="button" *ngIf="editable"
                                                [disabled]="IsSalesPersonReadOnly"
                                                (click)="openDiolog('User','Select Sales Person','Sales')">
                                                <mat-icon class="-ml-2">search</mat-icon>
                                            </button>
                                            <button
                                                *ngIf="TransactionEntryForm.get('SalesPersonName').value && editable"
                                                type="button" [disabled]="IsSalesPersonReadOnly" class="-m-7 z-10"
                                                aria-label="clear" matTooltip="Clear"
                                                (click)="clear('SalesPersonName', 'SalesPersonId')">
                                                <mat-icon>clear</mat-icon>
                                            </button>
                                            <label for="SalesPerson" class="mandatory">Sales Person</label>
                                        </div>

                                    </div>

                                    <!--  Team Reference -->
                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon> person_pin</mat-icon>
                                        </div>
                                        <div class="flex">
                                            <input type="text" class="peer " formControlName="TeamReferenceUserName"
                                                placeholder=" " id="TeamReferenceUser" autocomplete="off"
                                                [readOnly]="IsSalesPersonReadOnly" [matAutocomplete]="TeamRefSearch" />
                                            <mat-autocomplete #TeamRefSearch="matAutocomplete"
                                                (optionSelected)="AutocompleteSelectedEvent($event,'TeamRef')">
                                                <mat-option *ngFor="let Team of TeamRefUser$ | async" [value]="Team">
                                                    {{Team.FullName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <button class="-m-5 z-10" type="button" *ngIf="editable"
                                                [disabled]="IsSalesPersonReadOnly"
                                                (click)="openDiolog('User','Select Team Reference','TeamRef')">
                                                <mat-icon class="-ml-2">search</mat-icon>
                                            </button>
                                            <button
                                                *ngIf="TransactionEntryForm.get('TeamReferenceUserName').value && editable"
                                                [disabled]="IsSalesPersonReadOnly" type="button" class="-m-7 z-10"
                                                aria-label="clear" matTooltip="Clear"
                                                (click)="clear('TeamReferenceUserName', 'TeamReferenceUserId')">
                                                <mat-icon>clear</mat-icon>
                                            </button>
                                            <label for="TeamReferenceUser">Team Reference</label>
                                        </div>


                                    </div>

                                    <!-- Police Type  -->
                                    <div class="relative">
                                        <div class="icon">
                                            <mat-icon>group_work</mat-icon>
                                        </div>

                                        <select id="" formControlName="SalesPersonType">
                                            <option [disabled]="IsSalesPersonReadOnly" value="">--Select--</option>
                                            <option [disabled]="IsSalesPersonReadOnly" [value]="'Direct'">Direct
                                            </option>
                                            <option [disabled]="IsSalesPersonReadOnly" [value]="'POSP'">POSP</option>
                                            <option [disabled]="IsSalesPersonReadOnly" [value]="'Team Reference'">Team
                                                Reference</option>
                                        </select>
                                        <label for="SalesPersonType">Sales Person Type</label>
                                    </div>


                                    <!-- Customer Reference -->
                                    <div class="relative">
                                        <div class="icon">
                                            <mat-icon>person</mat-icon>
                                        </div>
                                        <input type="text" class="peer" id="CustomerReference" autocomplete="off"
                                            formControlName="CustomerReference" placeholder=" " />
                                        <label for="CustomerReference">Customer Reference</label>
                                    </div>


                                    <!-- Broker Qualified Person -->

                                    <div class="relative">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <input type="text" class="peer " readonly
                                            formControlName="BrokerQualifiedPersonName" placeholder=" " id="BQP" />
                                        <label for="BQP" class="mandatory">Broker Qualified Person</label>

                                    </div>



                                    <!-- <div class="relative">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <div class="flex">
                                            <input type="text" class="peer " [readOnly]="IsSalesPersonReadOnly"
                                                formControlName="BrokerQualifiedPersonName" placeholder=" " id="BQP"
                                                [matAutocomplete]="BrokerSearch" autocomplete="off" />
                                            <mat-autocomplete #BrokerSearch="matAutocomplete"
                                                (optionSelected)="AutocompleteSelectedEvent($event,'Broker')">
                                                <mat-option *ngFor="let Broker of BrokerPerson$ | async"
                                                    [value]="Broker">
                                                    {{Broker.FullName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <button class="-m-5 z-10" type="button" *ngIf="editable"
                                                [disabled]="IsSalesPersonReadOnly"
                                                (click)="openDiolog('User','Select Broker Qualified Person','Broker')">
                                                <mat-icon class="-ml-2">search</mat-icon>
                                            </button>
                                            <button
                                                *ngIf="TransactionEntryForm.get('BrokerQualifiedPersonName').value && editable"
                                                [disabled]="IsSalesPersonReadOnly" type="button" class="-m-7 z-10"
                                                aria-label="clear" matTooltip="Clear"
                                                (click)="clear('BrokerQualifiedPersonName', 'BrokerQualifiedPersonId')">
                                                <mat-icon>clear</mat-icon>
                                            </button>
                                            <label for="BQP" class="mandatory">Broker Qualified Person</label>
                                        </div>

                                    </div> -->


                                </div>
                            </form>
                        </div>
                        <!-- endregion form -->
                    </div>



                    <div *ngIf="!isExpand">
                        <button class="form-button m-2" mat-button matStepperPrevious>Back</button>
                        <button class="form-button m-2" mat-button matStepperNext>Next</button>
                    </div>
                </mat-step>

                <mat-step label="Payment Information" [stepControl]="PaymentInformationValidations()">
                    <div class="">
                        <form [formGroup]="PaymentForm" class="pt-3">

                            <p class="font-bold">Select Payment Mode</p>

                            <div class="gap-4 grid py-5">

                                <div class="grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6">

                                    <!-- ChequePayment -->
                                    <div class="lableInputbox">
                                        <input type="checkbox" class="peer " formControlName="ChequePayment" id="Cheque"
                                            value="true" />
                                        <label for="Cheque" class="">Cheque</label>
                                    </div>

                                    <!-- CashPayment -->
                                    <div class="lableInputbox">
                                        <input type="checkbox" class="peer " formControlName="CashPayment" id="Cash"
                                            value="true" />
                                        <label for="Cash">Cash</label>
                                    </div>

                                    <!-- OnlinePayment -->
                                    <div class="lableInputbox">
                                        <input type="checkbox" class="peer " formControlName="OnlinePayment" id="Online"
                                            value="true" />
                                        <label for="Online">Online</label>
                                    </div>

                                    <!-- CreditCardPayment -->
                                    <div class="lableInputbox">
                                        <input type="checkbox" class="peer " formControlName="CreditCardPayment"
                                            id="CreditCard" value="true" />
                                        <label for="CreditCard">Credit Card</label>
                                    </div>

                                    <!-- BrokerCdACPayment -->
                                    <div class="lableInputbox">
                                        <input type="checkbox" class="peer " formControlName="BrokerCdACPayment"
                                            id="Broker" value="true" />
                                        <label for="Broker">Broker Flote A/C</label>
                                    </div>

                                    <!-- CustomerFloatPayment -->
                                    <div class="lableInputbox">
                                        <input type="checkbox" class="peer " formControlName="CustomerFloatPayment"
                                            id=" CustomerFloat" value="true" />
                                        <label for=" CustomerFloat"> Customer Float</label>
                                    </div>

                                </div>

                                <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                                    <!-- Bank Name -->
                                    <div *ngIf="PaymentForm.get('ChequePayment').value" class="relative ">
                                        <div class="icon">
                                            <mat-icon>spa</mat-icon>
                                        </div>
                                        <select id="" formControlName="BankName">
                                            <option value="">--Select--</option>
                                            <option *ngFor="let bank Of BankList" [value]="bank.Name">
                                                {{bank.Name}}
                                            </option>
                                        </select>
                                        <label for="BName" class="mandatory">Bank Name</label>

                                    </div>


                                    <!-- Cheque No. -->
                                    <div *ngIf="PaymentForm.get('ChequePayment').value" class="relative ">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <input type="text" class="peer " maxlength="30" Onlynumber
                                            formControlName="ChequeNo" id="CName" placeholder=" " autocomplete="off" />
                                        <label for="CName" class="mandatory">Cheque No.</label>

                                    </div>

                                    <!-- Cheque Date -->
                                    <div *ngIf="PaymentForm.get('ChequePayment').value" class="relative ">
                                        <div class="flex">
                                            <div class="icon">
                                                <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                    [for]="ChequeDate"></mat-datepicker-toggle>
                                                <mat-datepicker #ChequeDate></mat-datepicker>
                                            </div>
                                            <input matInput type="text" id="ChequeDate" class="peer"
                                                (blur)="validateDate($event,'ChequeDate')" formControlName="ChequeDate"
                                                placeholder="__/__/____" datemask [matDatepicker]="ChequeDate"
                                                autocomplete="off">
                                            <label for="ChequeDate" class="mandatory">Cheque Date</label>
                                        </div>
                                    </div>

                                    <!-- Cheque Amount -->
                                    <div *ngIf="PaymentForm.get('ChequePayment').value" class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " #chequeAmount (focus)="chequeAmount.select()"
                                            (keydown)="DecimalWithMinus($event)" maxlength="15" autocomplete="off"
                                            formControlName="ChequeAmount" id="ChequeAmount" placeholder=" " />
                                        <label for="ChequeAmount" class="mandatory">Cheque Amount</label>
                                    </div>


                                    <!-- Cash Amount -->
                                    <div *ngIf="PaymentForm.get('CashPayment').value" class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " #cashAmount (focus)="cashAmount.select()"
                                            maxlength="15" (keydown)="DecimalWithMinus($event)" autocomplete="off"
                                            formControlName="CashAmount" id="CashAmount" placeholder=" " />
                                        <label for="CashAmount" class="mandatory">Cash Amount</label>
                                    </div>


                                    <!-- Online Transferred Amount -->
                                    <div *ngIf="PaymentForm.get('OnlinePayment').value" class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " #OTAmount (focus)="OTAmount.select()"
                                            maxlength="15" (keydown)="DecimalWithMinus($event)" autocomplete="off"
                                            formControlName="OnlineTransferredAmount" id="OTA" placeholder=" " />
                                        <label for="OTA" class="mandatory">Online Transferred Amount</label>
                                    </div>


                                    <!-- Credit Card Amount -->
                                    <div *ngIf="PaymentForm.get('CreditCardPayment').value" class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " #cCA (focus)="cCA.select()" maxlength="15"
                                            (keydown)="DecimalWithMinus($event)" formControlName="CreditCardAmount"
                                            id="CCA" placeholder=" " autocomplete="off" />
                                        <label for="CCA" class="mandatory">Credit Card Amount</label>
                                    </div>

                                    <!-- Broker Flote A/C Amount -->
                                    <div *ngIf="PaymentForm.get('BrokerCdACPayment').value" class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " #BCDAmount (focus)="BCDAmount.select()"
                                            maxlength="15" (keydown)="DecimalWithMinus($event)" autocomplete="off"
                                            formControlName="BrokerCdACAmount" id="BCDA" placeholder="Auto" />
                                        <label for="BCDA" class="mandatory">Broker Flote A/C Amount</label>
                                    </div>


                                    <!-- Customer Float Amount -->
                                    <div *ngIf="PaymentForm.get('CustomerFloatPayment').value" class="relative ">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " maxlength="15" #CFAmount autocomplete="off"
                                            (focus)="CFAmount.select()" (keydown)="DecimalWithMinus($event)"
                                            formControlName="CustomerFloatAmount" id="CFA" placeholder="Auto" />
                                        <label for="CFA" class="mandatory">Customer Float Amount</label>
                                    </div>


                                    <!-- Receivable Amount -->
                                    <div class="relative col-start-1">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " formControlName="ReceivableAmount" readonly
                                            Decimal maxlength="15" id="ReceivableAmount" placeholder=" "
                                            onfocus="this.select()" autocomplete="off" />
                                        <label for="ReceivableAmount" class="mandatory">Policy Amount</label>
                                    </div>


                                    <!-- Collected Amount -->
                                    <div class="relative col-start-1">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " readonly formControlName="CollectedAmount"
                                            Decimal maxlength="15" id="CollectedAmount" placeholder=" "
                                            onfocus="this.select()" autocomplete="off" />
                                        <label for="CollectedAmount" class="mandatory">Collected Amount</label>
                                    </div>


                                    <!--  Balance Amount -->
                                    <div class="relative col-start-1">
                                        <div class="icon rs"></div>
                                        <input type="text" class="peer " readonly formControlName="BalanceAmount"
                                            Decimal maxlength="15" id=" BalanceAmount" placeholder=" "
                                            onfocus="this.select()" autocomplete="off" />
                                        <label for=" BalanceAmount" class="mandatory">Balance Receivable Amount</label>
                                    </div>

                                    <!-- Balance Amount Authorized By -->
                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon>tonality</mat-icon>
                                        </div>
                                        <div class="flex">
                                            <input type="text" class="peer "
                                                formControlName="BalanceAmountAuthorizedUserName" placeholder=" "
                                                id="BAAB" [matAutocomplete]="BAAUserSearch" autocomplete="off" />
                                            <mat-autocomplete #BAAUserSearch="matAutocomplete"
                                                (optionSelected)="AutocompleteSelectedEvent($event,'BAAB')">
                                                <mat-option *ngFor="let BAAUser of BAAUser$ | async" [value]="BAAUser">
                                                    {{BAAUser.FullName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <button class="-m-5 z-10" *ngIf="editable" type="button"
                                                (click)="openDiolog('User','Select Credit Amount Authorized By','BAAB')">
                                                <mat-icon class="-ml-2">search</mat-icon>
                                            </button>
                                            <button
                                                *ngIf="PaymentForm.get('BalanceAmountAuthorizedUserName').value && editable"
                                                type="button" class="-m-7 z-10" aria-label="clear" matTooltip="Clear"
                                                (click)="clearCreditAmountAuthorized()">
                                                <mat-icon>clear</mat-icon>
                                            </button>
                                            <label for="BAAB"
                                                [ngClass]="((PaymentForm.get('BalanceAmount').value > 5 && TransactionEntryForm.get('PolicyType').value != 'Endorsement-Financial') || (TransactionEntryForm.get('PolicyType').value == 'Endorsement-Financial' && PaymentForm.get('BalanceAmount').value < 0)) ? 'mandatory' : ''">Credit
                                                Amount Authorized By</label>
                                        </div>

                                    </div>



                                    <div class="relative ">
                                        <div class="icon">
                                            <mat-icon>person</mat-icon>
                                        </div>

                                        <div class="flex">
                                            <input type="text" class="peer "
                                                formControlName="BalancecollectionResponsibilityUserName"
                                                placeholder=" " id="BACR" [matAutocomplete]="BACUserSearch"
                                                autocomplete="off" />
                                            <mat-autocomplete #BACUserSearch="matAutocomplete"
                                                (optionSelected)="AutocompleteSelectedEvent($event,'BACR')">
                                                <mat-option *ngFor="let BACUser of BACUser$ | async" [value]="BACUser">
                                                    {{BACUser.FullName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <button class="-m-5 z-10" type="button" *ngIf="editable"
                                                (click)="openDiolog('User','Select Balance Amount collection Responsibility','BACR')">
                                                <mat-icon class="-ml-2">search</mat-icon>
                                            </button>
                                            <button
                                                *ngIf="PaymentForm.get('BalancecollectionResponsibilityUserName').value && editable"
                                                type="button" class="-m-7 z-10" aria-label="clear" matTooltip="Clear"
                                                (click)="clearBalanceAmountcollectionResponsibility()">
                                                <mat-icon>clear</mat-icon>
                                            </button>
                                            <label for="BACR"
                                                [ngClass]="PaymentForm.get('BalanceAmount').value > 5 && TransactionEntryForm.get('PolicyType').value != 'Endorsement-Financial' ? 'mandatory' : ''">Balance
                                                Amount collection Responsibility</label>
                                        </div>
                                    </div>


                                    <!-- Date by which Balance will be collected -->
                                    <div class="relative ">
                                        <div class="flex">
                                            <div class="icon">
                                                <mat-datepicker-toggle class="-ml-2" matIconSuffix
                                                    [for]="DWBWC"></mat-datepicker-toggle>
                                                <mat-datepicker #DWBWC></mat-datepicker>
                                            </div>
                                            <input matInput type="text" id="DatebywhichBalancewillbecollected"
                                                class="peer"
                                                (blur)="validatePaymentDetailsDate  ($event,'DatebywhichBalancewillbecollected')"
                                                [min]="currentDate" formControlName="DatebywhichBalancewillbecollected"
                                                autocomplete="off" placeholder="__/__/____" datemask
                                                [matDatepicker]="DWBWC">
                                            <label for="DatebywhichBalancewillbecollected"
                                                [ngClass]="PaymentForm.get('BalanceAmount').value > 5 && TransactionEntryForm.get('PolicyType').value != 'Endorsement-Financial' ? 'mandatory' : ''">Date
                                                by which Balance will be collected</label>
                                        </div>
                                    </div>


                                    <!-- Remarks -->
                                    <div class="relative sm:col-span-2">
                                        <div class="icon">
                                            <mat-icon>category</mat-icon>
                                        </div>
                                        <input type="text" class="peer " maxlength="120" formControlName="Remark"
                                            id="Remarks" placeholder=" " autocomplete="off" />
                                        <label for="Remarks" class="">Remarks</label>
                                    </div>

                                </div>

                            </div>

                        </form>
                    </div>

                    <div *ngIf="!isExpand">
                        <button class="form-button m-2" mat-button matStepperPrevious>Back</button>
                        <button class="form-button m-2" (click)="PaymentInformationError()" mat-button
                            matStepperNext>Next</button>
                    </div>
                </mat-step>

                <!-- Eight stepper -->
                <mat-step label="Policy Document Attachment" [stepControl]="DocumentAttachmentValidation()">

                    <div class="p-4 h-full w-full">


                        <!-- region form -->
                        <div>
                            <form [formGroup]="TransactionEntryForm">

                                <div
                                    class="grid lg:grid-cols-[minmax(84px,390px)_minmax(84px,390px)]  gap-5 mt-4 grid-cols-1">

                                    <!--  Mandate Obtained? -->
                                    <div class="min-w-40">
                                        <span class="mandatory font-bold">Mandate Obtained ?</span>
                                        <div class="relative flex gap-10 mt-2">
                                            <div class="lableInputbox">
                                                <input type="radio" class="peer" formControlName="MandateObtained"
                                                    id="MandateObtainedNo" [value]="false" />
                                                <label class="" for="MandateObtainedNo">No</label>
                                            </div>
                                            <div class="lableInputbox">
                                                <input type="radio" class="peer" formControlName="MandateObtained"
                                                    id="MandateObtainedYes" [value]="true" />
                                                <label class="" for="MandateObtainedYes">Yes</label>
                                            </div>

                                        </div>
                                    </div>

                                    <!-- Attach Mandate Copy -->
                                    <div *ngIf="f['MandateObtained'].value" class="relative min-w-36">
                                        <div class="dummy-formField ">
                                            <div class="icon">
                                                <mat-icon>attach_file</mat-icon>
                                            </div>
                                            <input type="file" class="hidden" #AttachMandateCopy [disabled]="!editable"
                                                (change)="SelectTransactionDocument($event,'Mandate','Mandate')">
                                            <p class="ml-10 text-primary-500 cursor-pointer hover:text-primary-500 overflow-hidden whitespace-nowrap"
                                                [ngClass]="editable ? 'cursor-pointer text-primary-500 hover:text-primary-500' : 'pointer-events-none' "
                                                matTooltip="{{MandateDoc?.FileName}}"
                                                (click)="AttachMandateCopy.click()">
                                                {{MandateDoc?.FileName || 'Choose File' | excerpt:'max' }}</p>
                                            <label for="AttachMandateCopy" class="mandatory">Attach Mandate Copy</label>
                                            <div class="flex justify-end absolute right-2 bg-white"
                                                matTooltip="View Document"
                                                (click)="ViewQnDocument(MandateDoc?.ImageUploadPath)">
                                                <mat-icon *ngIf="MandateDoc?.ImageUploadPath"
                                                    class="cursor-pointer">visibility</mat-icon>
                                            </div>
                                        </div>
                                    </div>

                                </div>



                                <div
                                    class="grid lg:grid-cols-[minmax(84px,865px)_minmax(84px,584px)]  gap-5 mt-4 grid-cols-1">
                                    <div class="mt-5">
                                        <div>
                                            <div class="relative min-w-32 max-w-64">
                                                <div class="icon">
                                                    <mat-icon> compass_calibration</mat-icon>
                                                </div>
                                                <select class="peer bg-white" #DocumentDropdown
                                                    (change)="onDocumentSelectionChange($event)" [disabled]="!editable">
                                                    <option value="">--Select--</option>
                                                    <!-- [disabled]="checkValue(option.DocumentType)" -->
                                                    <option [value]="option.DocumentType"
                                                        *ngFor="let option of PolicyDocumentList">
                                                        {{option.DocumentTypeName}}
                                                    </option>
                                                </select>
                                                <label for="">Document Dropdown</label>
                                            </div>
                                        </div>

                                        <div class="grid lg:grid-cols-2 sm:grid-cols-1 gap-4 mt-6 ">

                                            <ng-container formArrayName="Documents"
                                                *ngFor="let doc of document.controls;let i=index">
                                                <ng-container [formGroupName]="i"
                                                    *ngIf="doc.value.DocumentType != 'Mandate' && doc.value.DocumentType != 'PreviousPolicy'">

                                                    <div class="relative w-full">
                                                        <mat-icon *ngIf="editable"
                                                            (click)="RemoveDocuments(i,doc.value)"
                                                            class="absolute -right-2 -top-3 text-red-500 cursor-pointer">cancel</mat-icon>
                                                        <div class="dummy-formField ">
                                                            <div class="icon">
                                                                <mat-icon>attach_file</mat-icon>
                                                            </div>
                                                            <input type="file" class="hidden" accept=".doc,.docx,.pdf"
                                                                [disabled]="!editable" #AttachDocument
                                                                (change)="SelectTransactionDocument($event,doc.value.DocumentType,doc.value.DocumentTypeName, i)">
                                                            <p class="ml-10  text-primary-500  overflow-hidden  whitespace-nowrap"
                                                                [ngClass]="editable ? 'cursor-pointer text-primary-500 hover:text-primary-500' : 'pointer-events-none' "
                                                                matTooltip="{{doc.value.FileName}}"
                                                                (click)="AttachDocument.click()">
                                                                {{doc.value.FileName || 'Choose File' | excerpt:'max' }}
                                                            </p>
                                                            <label for="AttachDocument" class="mandatory">{{
                                                                doc.value.DocumentTypeName
                                                                }}</label>
                                                            <div class="flex justify-end absolute right-2 bg-white"
                                                                matTooltip="View Document"
                                                                (click)="ViewQnDocument(doc.value?.ImageUploadPath)">
                                                                <mat-icon *ngIf="doc.value?.ImageUploadPath"
                                                                    class="cursor-pointer">visibility</mat-icon>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </ng-container>
                                            </ng-container>

                                        </div>

                                        <!-- Document Remarks -->
                                        <div class="relative mt-5" *ngIf="IsRemark == true">
                                            <div class="icon">
                                                <mat-icon>bubble_chart</mat-icon>
                                            </div>
                                            <input type="text" class="peer" id="DocumentRemarks" placeholder=" "
                                                formControlName="DocumentRemarks" autocomplete="off" />
                                            <label for="DocumentRemarks">Document Remarks</label>
                                        </div>

                                        <div class="ml-3 flex gap-1">
                                            <strong class="text-red-500">
                                                Attachments Note:
                                            </strong>
                                            <p class="text-red-500">
                                                Please select a valid Word or PDF File.
                                            </p>
                                        </div>
                                    </div>




                                    <!--  -->
                                    <!-- REMOVE BY SAMIR PATEL  -->
                                    <!-- 30-01-2025 -->
                                    <!-- <div> -->
                                        <!-- <div class="mt-5"> -->
                                            <!-- Send Email to Customer -->
                                            <!-- <div class="relative ">
                                                <div class="icon">
                                                    <mat-icon>mail</mat-icon>
                                                </div>
                                                <div class="flex">
                                                    <input type="text" class="peer" [disabled]="!editable"
                                                        placeholder=" " id="SendEmailtoCustomer"
                                                        [matChipInputFor]="chipGrid" autocomplete="off"
                                                        (matChipInputTokenEnd)="AddCustomerEmail($event)" />
                                                    <div class="m-3  z-10 absolute right-0">
                                                        <input type="checkbox">
                                                    </div>
                                                    <label for="SendEmailtoCustomer">Send Email to Customer</label>
                                                </div>
                                            </div> -->

                                            <!-- Email Chips -->
                                            <!-- <div class="ml-3">
                                                <mat-chip-grid #chipGrid class="flex flex-wrap">
                                                    <mat-chip-row class="mx-1 mt-5 w-fit"
                                                        *ngFor="let email of EmailArray;let i = index"
                                                        [removable]="true" (removed)="RemovedCustomerEmail(i)">
                                                        <p class="break-all word  ">
                                                            {{ email }}
                                                        </p>
                                                        <mat-icon matChipRemove>cancel</mat-icon>
                                                    </mat-chip-row>
                                                </mat-chip-grid>
                                            </div> -->
                                        <!-- </div> -->

                                        <!-- <div class="ml-3 flex gap-1">
                                            <strong class="text-red-500">Customer Email Note:</strong>
                                            <p class="text-red-500">
                                                You can enter multiple email addresses.
                                            </p>
                                        </div> -->
                                    <!-- </div> -->
                                </div>

                            </form>
                        </div>
                        <!-- endregion form -->
                    </div>


                    <div class="mt-2">
                        <button class="form-button m-2" mat-button matStepperPrevious *ngIf="!isExpand">Back</button>
                        <button class="form-button m-2" *ngIf="editable" (click)="submiitTransactionEntryForm()"
                            mat-button>Save</button>
                    </div>
                </mat-step>

            </mat-stepper>
        </div>
    </div>
</div>