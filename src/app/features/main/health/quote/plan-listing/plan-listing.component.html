<div class="px-4  max-h-none w-full">
  <!-- region main heading -->

  <div class="sticky top-0 z-40 bg-default pt-4">
    <h1 class="new-head text-lg px-4 py-1.5 rounded flex justify-between items-center font-semibold">
      {{ pagetitle }}

      <!-- region Heading Controls -->
      <div class="flex gap-x-3 items-center text-md font-normal">
        <button (click)="backClick()" [disabled]="backDisable" mat-raised-button class="new-button">
          Back
        </button>
      </div>
    </h1>

    <gnx-info-header  [InsuredPeople]="InsuredPeople"
                      [PolicyPeriod]="PolicyPeriod"
                      [PolicyType]="PolicyType"
                      [member]="member"
                      [ReqSumInsured]="ReqSumInsured"
    >
    </gnx-info-header>

    <!-- <div class="">
      <div class="px-4 py-7 rounded bg-white">
        <mat-card class="bg-sky-100 px-4 py-3 gap-2 container mx-auto">
          <div class="grid lg:grid-cols-4 md:grid-cols-2 sm:grid-cols-2 grid-cols-1 gap-6">
            <div class="sm:grid-cols-1 grid grid-cols-[minmax(100px,250px)_minmax(250px,500px)]">
              <div class="flex gap-3">
                <small>
                  <span class="font-bold"> {{ InsuredPeople }}</span>
                  Person<span *ngIf="InsuredPeople > 1">s</span> Insured
                </small>
              </div>

              <div class="grid grid-cols-7 gap-0.5 w-fit">
                <div *ngFor="let item of member" class="h-min">
                  <img src="{{ item.member }}" alt="" class="h-7 w-7" />
                </div>
              </div>
            </div>
            <div class="sm:grid-cols-1 grid grid-cols-2 text-slate-950">
              <small>Sum Insured</small>
              <span class="font-bold"> {{ ReqSumInsured | indCurrency }} </span>
            </div>
            <div class="sm:grid-cols-1 grid grid-cols-2">
              <small>Policy Type</small>
              <span class="font-bold"> {{ PolicyType }}</span>
            </div>
            <div class="sm:grid-cols-1 grid grid-cols-2">
              <small>Policy Period</small>
              <span class="font-bold"> {{ PolicyPeriod + " Year" || "" }}</span>
            </div>
          </div>
        </mat-card>
      </div>
    </div> -->
  </div>
  <!-- endregion main heading -->

  <div class="" *ngIf="PoliciesList">
    <div *ngFor="let comp of PoliciesList; let c = index">
      <div class="py-1 rounded " *ngFor="let policy of comp.Polices; let i = index" >
        <mat-card class="px-4 py-2 shadow-md shadow-blue-200 hover:-translate-y-1 hover:bg-blue-100 hover:scale-100 duration-300 ">
          <div class="grid
          lg:grid-cols-[minmax(100px,20%)_minmax(100px,30%)_minmax(100px,30%)_minmax(100px,20%)]
          md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-2" >

            <!-- <div class="grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-2"> -->

            <div class="flex justify-start items-center">
              <div class="flex justify-center"
              [ngClass]="{
                    'w-24 h-24':  policy.Insurer?.toLowerCase() == InsuranceCompany.HdfcErgo || policy.Insurer?.toLowerCase() == InsuranceCompany.TataAIA,
                    'w-24 h-20':  policy.Insurer?.toLowerCase() == InsuranceCompany.AdityaBirla,
                    'w-40 h-19':  policy.Insurer?.toLowerCase() == InsuranceCompany.BajajAllianz,
                    'w-44 h-14':  policy.Insurer?.toLowerCase() == InsuranceCompany.Care,
                    'w-28 h-14':  policy.Insurer?.toLowerCase() == InsuranceCompany.GoDigit,
                    'w-40 h-12':  policy.Insurer?.toLowerCase() == InsuranceCompany.ICICI,
                    'w-40 h-22':  policy.Insurer?.toLowerCase() == InsuranceCompany.IffcoTokio,
                    'w-27':  policy.Insurer?.toLowerCase() == InsuranceCompany.SbiGeneral
                }">
                <img class="w-auto h-auto" src="{{ policy.IconURL }}" alt="logo"/>
              </div>
            </div>


            <div class="grid lg:flex-wrap col-span-2 md:flex-wrap sm:flex-wrap h-fit gap-2">
              <div class="grid sm:grid-cols-2 gap-2">

                <div class="sm:block grid grid-cols-3">
                  <small>Plan</small>
                  <br class="sm:block hidden" />
                  <span class="font-bold col-span-2"> {{ policy.ProductName }}</span>
                  <br class="sm:block hidden" />
                  <small>Policy Period</small>
                  <br class="sm:block hidden" />
                  <span class="font-bold"> {{ policy.PolicyPeriodName }}</span>
                </div>

                <div class="grid lg:grid-cols-2 md:grid-cols-2 sm:grid-cols-2 grid-cols-1 gap-3">
                  <div class="sm:block grid grid-cols-3">
                    <small>Sum Insured</small>
                    <br />
                    <mat-card-subtitle>
                      {{ policy.SumInsured | indCurrency }}
                    </mat-card-subtitle>
                  </div>
                  <div class="sm:block grid grid-cols-3">
                    <small>Premium</small>
                    <br />
                    <mat-card-subtitle>
                      {{ policy.TotalPremium | indCurrency }}
                    </mat-card-subtitle>
                    <small class="hover:cursor-pointer text-sky-600" (click)="openDiolog(policy, 'View Premium')">
                      View Premium Details
                    </small>
                  </div>
                </div>

              </div>

              <div *ngIf="policy.Insurer.toLowerCase() == InsurerNameList.HdfcErgo">
                <p class="text-gray-500"><span class="font-bold">Note:</span> You can reduce your premium amount with Deductibles. Click on 'BUY NOW' to select Deductibles.</p>
              </div>

            </div>

            <div class="grid lg:grid-rows-2 md:grid-rows-1 sm:grid-rows-1 grid-rows-1 grid-flow-col gap-2">

              <div>
                <button (click)="buyNow(policy)" mat-raised-button class="bg-royal text-on-primary-800 lg:w-48 md:w-fit sm:w-fit">
                  <mat-icon>shopping_cart</mat-icon>
                  <span class="hidden sm:block">Buy Now </span>
                </button>
              </div>

              <div class="grid min-w-32 grid-cols-3 sm:grid-cols-3 md:grid-cols-3 md:gap-3 lg:grid-cols-6 items-center">
                <input class="ml-3" type="checkbox" disabled *ngIf="CompareListLength > 2 && policy.isChecked != true">

                <mat-checkbox matTooltip="Compare" [checked]="policy.isChecked" (change)="AddInCompareList($event, policy)" *ngIf="CompareListLength < 3 || policy.isChecked == true"></mat-checkbox>
                <button mat-icon-button type="button" (click)="openDiologShare(policy, 'Share')" matTooltip="share">
                  <mat-icon>share</mat-icon>
                </button>
                <button mat-icon-button type="button" matTooltip="View Details" (click)="ViewDetails(policy)">
                  <mat-icon>visibility</mat-icon>
                </button>
              </div>

            </div>

          </div>
        </mat-card>
      </div>
    </div>

    <div class="h-20" *ngIf="CompareListLength > 0"></div>
  </div>
</div>

<div class="fixed bottom-0 content-center z-40 w-full border-t-4 border-sky-300" *ngIf="CompareListLength > 0">
  <div>
    <mat-card class="px-4 py-2 shadow-md shadow-blue-200">
      <div class="grid lg:grid-cols-2 md:grid-cols-2 sm:grid-cols-2 grid-cols-2 gap-2">
        <div class="grid lg:grid-cols-3 md:grid-cols-3 sm:grid-cols-3 grid-cols-3 gap-3">
          <div *ngFor="let plan of CompareList">
            <div class="sm:block grid grid-cols-3">
              <img class="max-w-20 h-10 pt-1" src="{{ plan.IconURL }}" alt="logo"/>
            </div>
            <div class="sm:block">
              <mat-card-subtitle>
                {{ plan.TotalPremium | indCurrency }}
              </mat-card-subtitle>
            </div>
          </div>
        </div>

        <div class="items-center">
          <div class="flex justify-between">
            <button (click)="ShareNow()" mat-raised-button class="bg-gray-200 text-black lg:w-48 md:w-fit sm:w-fi">
              <mat-icon>share</mat-icon><span class="hidden sm:block"> Share </span>
            </button>
            <button (click)="CompareNow()" mat-raised-button class="bg-royal text-on-primary-800 lg:w-48 md:w-fit sm:w-fit">
              <mat-icon>compare</mat-icon>
              <span class="hidden sm:block"> Compare now </span>
            </button>
            <button (click)="CompareClear()" mat-raised-button  class="bg-gray-200 text-black lg:w-48 md:w-fit sm:w-fi">
              <mat-icon>clear</mat-icon>
              <span class="hidden sm:block"> Clear </span>
            </button>
            <br />
            <small>max 3 plans can be compared at a time</small>
          </div>
        </div>
      </div>
    </mat-card>
  </div>
</div>
