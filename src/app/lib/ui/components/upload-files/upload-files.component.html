<form [formGroup]="Form" class=" max-w-180">

    <div class="flex justify-between items-center">
        <input type="file" id="inputfile" class="inputfile" multiple (change)="selectFiles($event)"
            accept="image/*, .pdf, .csv" />

        <label for="inputfile" class="btn btn-default">
            Add Attachment(s)
        </label>
    </div>

    <div *ngFor="let progressInfo of progressInfos" class="">
        <div class="progress">
            <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
                attr.aria-valuenow="{{ progressInfo.value }}" aria-valuemin="0" aria-valuemax="100"
                [ngStyle]="{ width: progressInfo.value + '%' }">
            </div>
        </div>
    </div>

    <section class="overflow-x-scroll md:overflow-x-visible">

        <table class="table">
            <thead>
                <tr class="">
                    <th>Filename</th>
                    <th>Description</th>
                    <th>Default</th>
                    <th class="w-1/12"></th>
                </tr>
            </thead>
            <tbody>

                <ng-container formArrayName="AttachmentDetails"
                    *ngFor="let item of Form.get('AttachmentDetails')['controls']; index as i">
                    <ng-container *ngIf="!item.controls['Deleted'].value">
                        <tr>
                            <td [formGroupName]="i">
                                <a download [href]="apiDomain + Form['controls']['AttachmentDetails']['controls'][i]['controls']['StorageFilePath'].value" target="_blank">
                                    {{item.controls['FileName'].value}}
                                </a>
                            </td>
                            <td [formGroupName]="i">
                                <input id="Description" name="Description" class="form-control" formControlName="Description">
                            </td>
                            <td [formGroupName]="i">
                                <input type="checkbox" id="IsDefault" name="IsDefault" class="form-control" formControlName="IsDefault" (click)="changeIsDefault(i)">
                            </td>
                            <td *ngIf="mode!='View'">
                                <div class="flex gap-x-4 justify-center items-center w-full">
                                    <i class="fa fa-trash text-warn-600" (click)="deleteAttachmentDetail(i)"></i>
                                </div>
                            </td>
                        </tr>
                    </ng-container>
                </ng-container>


                <tr *ngIf="!Form.get('AttachmentDetails')['controls'].length">
                    <td colspan="4" class="text-start hover:text-accent-800">
                        No record available
                    </td>
                </tr>

            </tbody>
        </table>

    </section>

    <div class="alert alert-light text-warn-500" role="alert">{{ message }}</div>

</form>
